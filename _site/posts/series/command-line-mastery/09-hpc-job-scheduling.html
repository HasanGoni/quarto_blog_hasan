<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Hasan">
<meta name="dcterms.date" content="2025-06-29">
<meta name="description" content="Master the art of submitting and managing computational jobs on HPC clusters using bsub. Learn to orchestrate hundreds of parallel jobs, monitor resources, and handle complex workflows like a professional researcher.">

<title>Hasan’s Data Science &amp; AI Blog - HPC Job Scheduling with bsub</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script async="" src="https://hypothes.is/embed.js"></script>


<link rel="stylesheet" href="../../../styles.css">
<meta property="og:title" content="Hasan’s Data Science &amp; AI Blog - HPC Job Scheduling with bsub">
<meta property="og:description" content="Master the art of submitting and managing computational jobs on HPC clusters using bsub. Learn to orchestrate hundreds of parallel jobs, monitor resources, and handle complex workflows like a professional researcher.">
<meta property="og:image" content="https://images.unsplash.com/photo-1629654297299-c8506221ca97?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=2000&amp;q=80">
<meta property="og:site-name" content="Hasan's Data Science &amp; AI Blog">
<meta name="twitter:title" content="Hasan’s Data Science &amp; AI Blog - HPC Job Scheduling with bsub">
<meta name="twitter:description" content="Master the art of submitting and managing computational jobs on HPC clusters using bsub. Learn to orchestrate hundreds of parallel jobs, monitor resources, and handle complex workflows like a professional researcher.">
<meta name="twitter:image" content="https://images.unsplash.com/photo-1629654297299-c8506221ca97?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=2000&amp;q=80">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Hasan’s Data Science &amp; AI Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-series" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Series</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-series">    
        <li>
    <a class="dropdown-item" href="../../../posts/series/command-line-mastery.html" rel="" target="">
 <span class="dropdown-text">Command Line Mastery for HPC</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../posts/series/data-science-steps.html" rel="" target="">
 <span class="dropdown-text">Data Science Steps</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../posts/series/computer-vision-foundations.html" rel="" target="">
 <span class="dropdown-text">Computer Vision Foundations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../posts/series/vim-mastery.html" rel="" target="">
 <span class="dropdown-text">Vim Mastery</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../posts/series/vlm.html" rel="" target="">
 <span class="dropdown-text">VLM Series</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../posts/series/anomaly-detection/index.html" rel="" target="">
 <span class="dropdown-text">Anomaly Detection</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../../categories.html" rel="" target="">
 <span class="menu-text">Categories</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../tags.html" rel="" target="">
 <span class="menu-text">Tags</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/HasanGoni" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/hasangoni" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../posts/series/command-line-mastery.html">Command Line Mastery for HPC</a></li><li class="breadcrumb-item"><a href="../../../posts/series/command-line-mastery/09-hpc-job-scheduling.html">9. HPC Job Scheduling</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">HPC Job Scheduling with bsub</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
                  <div>
        <div class="description">
          Master the art of submitting and managing computational jobs on HPC clusters using bsub. Learn to orchestrate hundreds of parallel jobs, monitor resources, and handle complex workflows like a professional researcher.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">command-line</div>
                <div class="quarto-category">hpc</div>
                <div class="quarto-category">bsub</div>
                <div class="quarto-category">job-scheduling</div>
                <div class="quarto-category">parallel-computing</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Hasan </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 29, 2025</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">June 29, 2025</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Command Line Mastery for HPC</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/command-line-mastery.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Command Line Mastery for HPC Series</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/command-line-mastery/01-digital-compass.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Digital Compass</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/command-line-mastery/02-file-detective.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. File Detective</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/command-line-mastery/03-file-manipulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3. File Manipulation Magic</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/command-line-mastery/04-text-processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4. Text Processing Power</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/command-line-mastery/05-permission-wizardry.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5. Permission Wizardry</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/command-line-mastery/06-ssh-remote-access.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6. SSH and Remote Access</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/command-line-mastery/07-file-transfer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">7. File Transfer Mastery</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/command-line-mastery/08-environment-mastery.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8. Environment Mastery</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/command-line-mastery/09-hpc-job-scheduling.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">9. HPC Job Scheduling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/command-line-mastery/10-parallel-processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10. Parallel Processing Power</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/command-line-mastery/11-bash-scripting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">11. Bash Scripting Essentials</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/command-line-mastery/12-automation-excellence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">12. Automation Excellence</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Data Science</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/data-science-steps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Science Steps Series</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/data-science-steps-to-follow-part01/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Science Steps to Follow - 01</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/data-science-steps-to-follow-part02/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Science Steps to Follow - 02</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/data-science-steps-to-follow-part03/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Science Steps to Follow - 03</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/data-science-steps-to-follow-part04/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Science Steps to Follow - 04</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/data-science-steps-to-follow-part05/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Science Steps to Follow - 05</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/data-science-steps-to-follow-part06/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Science Steps to Follow - 06</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Computer Vision Foundations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/computer-vision-foundations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Computer Vision Foundations Series</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/cv-foundations/01-why-computer-vision.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Why Computer Vision?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/cv-foundations/02-images-as-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Images as Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/cv-foundations/03-opencv-essentials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3. OpenCV Essentials</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/cv-foundations/04-finding-patterns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4. Finding Patterns</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/cv-foundations/05-image-segmentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5. Image Segmentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/cv-foundations/06-feature-magic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6. Feature Magic</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/cv-foundations/07-why-deep-learning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">7. Why Deep Learning?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/cv-foundations/08-modern-vision-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8. Modern Vision Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/cv-foundations/09-first-cv-project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9. First CV Project</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/cv-foundations/10-where-to-go-next.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">10. Where to Go Next</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Anomaly Detection</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/anomaly-detection/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/anomaly-detection/finding-the-oddballs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Finding the Oddballs</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">VLM Series</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/vlm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/series/vlm-qwen3-14b/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Qwen3-14B</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-story-the-computational-orchestra" id="toc-the-story-the-computational-orchestra" class="nav-link active" data-scroll-target="#the-story-the-computational-orchestra"><span class="header-section-number">0.1</span> The Story: The Computational Orchestra</a></li>
  <li><a href="#understanding-hpc-job-scheduling" id="toc-understanding-hpc-job-scheduling" class="nav-link" data-scroll-target="#understanding-hpc-job-scheduling"><span class="header-section-number">0.2</span> Understanding HPC Job Scheduling</a>
  <ul class="collapse">
  <li><a href="#why-we-need-job-schedulers" id="toc-why-we-need-job-schedulers" class="nav-link" data-scroll-target="#why-we-need-job-schedulers"><span class="header-section-number">0.2.1</span> Why We Need Job Schedulers</a></li>
  <li><a href="#the-lsf-load-sharing-facility-system" id="toc-the-lsf-load-sharing-facility-system" class="nav-link" data-scroll-target="#the-lsf-load-sharing-facility-system"><span class="header-section-number">0.2.2</span> The LSF (Load Sharing Facility) System</a></li>
  </ul></li>
  <li><a href="#your-first-bsub-command" id="toc-your-first-bsub-command" class="nav-link" data-scroll-target="#your-first-bsub-command"><span class="header-section-number">0.3</span> Your First bsub Command</a></li>
  <li><a href="#understanding-job-output" id="toc-understanding-job-output" class="nav-link" data-scroll-target="#understanding-job-output"><span class="header-section-number">0.4</span> Understanding Job Output</a></li>
  <li><a href="#essential-bsub-options" id="toc-essential-bsub-options" class="nav-link" data-scroll-target="#essential-bsub-options"><span class="header-section-number">0.5</span> Essential bsub Options</a>
  <ul class="collapse">
  <li><a href="#specifying-resources" id="toc-specifying-resources" class="nav-link" data-scroll-target="#specifying-resources"><span class="header-section-number">0.5.1</span> Specifying Resources</a></li>
  <li><a href="#choosing-queues" id="toc-choosing-queues" class="nav-link" data-scroll-target="#choosing-queues"><span class="header-section-number">0.5.2</span> Choosing Queues</a></li>
  <li><a href="#naming-your-jobs" id="toc-naming-your-jobs" class="nav-link" data-scroll-target="#naming-your-jobs"><span class="header-section-number">0.5.3</span> Naming Your Jobs</a></li>
  </ul></li>
  <li><a href="#real-world-hpc-scenarios" id="toc-real-world-hpc-scenarios" class="nav-link" data-scroll-target="#real-world-hpc-scenarios"><span class="header-section-number">0.6</span> Real-World HPC Scenarios</a>
  <ul class="collapse">
  <li><a href="#scenario-1-single-analysis-job" id="toc-scenario-1-single-analysis-job" class="nav-link" data-scroll-target="#scenario-1-single-analysis-job"><span class="header-section-number">0.6.1</span> Scenario 1: Single Analysis Job</a></li>
  <li><a href="#scenario-2-array-jobs-processing-multiple-files" id="toc-scenario-2-array-jobs-processing-multiple-files" class="nav-link" data-scroll-target="#scenario-2-array-jobs-processing-multiple-files"><span class="header-section-number">0.6.2</span> Scenario 2: Array Jobs (Processing Multiple Files)</a></li>
  <li><a href="#scenario-3-gpu-jobs" id="toc-scenario-3-gpu-jobs" class="nav-link" data-scroll-target="#scenario-3-gpu-jobs"><span class="header-section-number">0.6.3</span> Scenario 3: GPU Jobs</a></li>
  </ul></li>
  <li><a href="#job-monitoring-and-management" id="toc-job-monitoring-and-management" class="nav-link" data-scroll-target="#job-monitoring-and-management"><span class="header-section-number">0.7</span> Job Monitoring and Management</a>
  <ul class="collapse">
  <li><a href="#checking-job-status" id="toc-checking-job-status" class="nav-link" data-scroll-target="#checking-job-status"><span class="header-section-number">0.7.1</span> Checking Job Status</a></li>
  <li><a href="#detailed-job-information" id="toc-detailed-job-information" class="nav-link" data-scroll-target="#detailed-job-information"><span class="header-section-number">0.7.2</span> Detailed Job Information</a></li>
  <li><a href="#managing-running-jobs" id="toc-managing-running-jobs" class="nav-link" data-scroll-target="#managing-running-jobs"><span class="header-section-number">0.7.3</span> Managing Running Jobs</a></li>
  </ul></li>
  <li><a href="#advanced-bsub-techniques" id="toc-advanced-bsub-techniques" class="nav-link" data-scroll-target="#advanced-bsub-techniques"><span class="header-section-number">0.8</span> Advanced bsub Techniques</a>
  <ul class="collapse">
  <li><a href="#job-dependencies" id="toc-job-dependencies" class="nav-link" data-scroll-target="#job-dependencies"><span class="header-section-number">0.8.1</span> Job Dependencies</a></li>
  <li><a href="#resource-specifications" id="toc-resource-specifications" class="nav-link" data-scroll-target="#resource-specifications"><span class="header-section-number">0.8.2</span> Resource Specifications</a></li>
  <li><a href="#interactive-jobs" id="toc-interactive-jobs" class="nav-link" data-scroll-target="#interactive-jobs"><span class="header-section-number">0.8.3</span> Interactive Jobs</a></li>
  </ul></li>
  <li><a href="#professional-job-submission-scripts" id="toc-professional-job-submission-scripts" class="nav-link" data-scroll-target="#professional-job-submission-scripts"><span class="header-section-number">0.9</span> Professional Job Submission Scripts</a>
  <ul class="collapse">
  <li><a href="#the-standard-job-script-template" id="toc-the-standard-job-script-template" class="nav-link" data-scroll-target="#the-standard-job-script-template"><span class="header-section-number">0.9.1</span> The Standard Job Script Template</a></li>
  <li><a href="#array-job-script-for-multiple-files" id="toc-array-job-script-for-multiple-files" class="nav-link" data-scroll-target="#array-job-script-for-multiple-files"><span class="header-section-number">0.9.2</span> Array Job Script for Multiple Files</a></li>
  </ul></li>
  <li><a href="#monitoring-system-resources" id="toc-monitoring-system-resources" class="nav-link" data-scroll-target="#monitoring-system-resources"><span class="header-section-number">0.10</span> Monitoring System Resources</a>
  <ul class="collapse">
  <li><a href="#cluster-status" id="toc-cluster-status" class="nav-link" data-scroll-target="#cluster-status"><span class="header-section-number">0.10.1</span> Cluster Status</a></li>
  <li><a href="#your-resource-usage" id="toc-your-resource-usage" class="nav-link" data-scroll-target="#your-resource-usage"><span class="header-section-number">0.10.2</span> Your Resource Usage</a></li>
  </ul></li>
  <li><a href="#common-hpc-job-patterns" id="toc-common-hpc-job-patterns" class="nav-link" data-scroll-target="#common-hpc-job-patterns"><span class="header-section-number">0.11</span> Common HPC Job Patterns</a>
  <ul class="collapse">
  <li><a href="#pattern-1-parameter-sweep" id="toc-pattern-1-parameter-sweep" class="nav-link" data-scroll-target="#pattern-1-parameter-sweep"><span class="header-section-number">0.11.1</span> Pattern 1: Parameter Sweep</a></li>
  <li><a href="#pattern-2-pipeline-processing" id="toc-pattern-2-pipeline-processing" class="nav-link" data-scroll-target="#pattern-2-pipeline-processing"><span class="header-section-number">0.11.2</span> Pattern 2: Pipeline Processing</a></li>
  <li><a href="#pattern-3-embarrassingly-parallel" id="toc-pattern-3-embarrassingly-parallel" class="nav-link" data-scroll-target="#pattern-3-embarrassingly-parallel"><span class="header-section-number">0.11.3</span> Pattern 3: Embarrassingly Parallel</a></li>
  </ul></li>
  <li><a href="#troubleshooting-common-issues" id="toc-troubleshooting-common-issues" class="nav-link" data-scroll-target="#troubleshooting-common-issues"><span class="header-section-number">0.12</span> Troubleshooting Common Issues</a>
  <ul class="collapse">
  <li><a href="#problem-1-job-stays-in-pend-state" id="toc-problem-1-job-stays-in-pend-state" class="nav-link" data-scroll-target="#problem-1-job-stays-in-pend-state"><span class="header-section-number">0.12.1</span> Problem 1: Job Stays in PEND State</a></li>
  <li><a href="#problem-2-job-exits-immediately" id="toc-problem-2-job-exits-immediately" class="nav-link" data-scroll-target="#problem-2-job-exits-immediately"><span class="header-section-number">0.12.2</span> Problem 2: Job Exits Immediately</a></li>
  <li><a href="#problem-3-out-of-memory-errors" id="toc-problem-3-out-of-memory-errors" class="nav-link" data-scroll-target="#problem-3-out-of-memory-errors"><span class="header-section-number">0.12.3</span> Problem 3: Out of Memory Errors</a></li>
  </ul></li>
  <li><a href="#best-practices-for-hpc-job-management" id="toc-best-practices-for-hpc-job-management" class="nav-link" data-scroll-target="#best-practices-for-hpc-job-management"><span class="header-section-number">0.13</span> Best Practices for HPC Job Management</a>
  <ul class="collapse">
  <li><a href="#resource-estimation" id="toc-resource-estimation" class="nav-link" data-scroll-target="#resource-estimation"><span class="header-section-number">0.13.1</span> 1. Resource Estimation</a></li>
  <li><a href="#job-organization" id="toc-job-organization" class="nav-link" data-scroll-target="#job-organization"><span class="header-section-number">0.13.2</span> 2. Job Organization</a></li>
  <li><a href="#error-handling" id="toc-error-handling" class="nav-link" data-scroll-target="#error-handling"><span class="header-section-number">0.13.3</span> 3. Error Handling</a></li>
  </ul></li>
  <li><a href="#quick-reference-bsub-command-cheat-sheet" id="toc-quick-reference-bsub-command-cheat-sheet" class="nav-link" data-scroll-target="#quick-reference-bsub-command-cheat-sheet"><span class="header-section-number">0.14</span> Quick Reference: bsub Command Cheat Sheet</a></li>
  <li><a href="#practice-exercises" id="toc-practice-exercises" class="nav-link" data-scroll-target="#practice-exercises"><span class="header-section-number">0.15</span> Practice Exercises</a></li>
  <li><a href="#whats-next" id="toc-whats-next" class="nav-link" data-scroll-target="#whats-next"><span class="header-section-number">0.16</span> What’s Next?</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="the-story-the-computational-orchestra" class="level2" data-number="0.1">
<h2 data-number="0.1" class="anchored" data-anchor-id="the-story-the-computational-orchestra"><span class="header-section-number">0.1</span> The Story: The Computational Orchestra</h2>
<p>Imagine you’re a conductor of a massive orchestra with 1,000 musicians (CPU cores), but instead of playing music, they’re processing your research data. You need to coordinate when each musician plays, what piece they perform, and ensure they don’t interfere with each other. Some pieces need the entire string section, others just a solo violin.</p>
<p>This is exactly what HPC job scheduling is about. The <code>bsub</code> command is your conductor’s baton, allowing you to orchestrate computational jobs across hundreds or thousands of processors. Today, you’ll learn to conduct your own computational symphony.</p>
</section>
<section id="understanding-hpc-job-scheduling" class="level2" data-number="0.2">
<h2 data-number="0.2" class="anchored" data-anchor-id="understanding-hpc-job-scheduling"><span class="header-section-number">0.2</span> Understanding HPC Job Scheduling</h2>
<section id="why-we-need-job-schedulers" class="level3" data-number="0.2.1">
<h3 data-number="0.2.1" class="anchored" data-anchor-id="why-we-need-job-schedulers"><span class="header-section-number">0.2.1</span> Why We Need Job Schedulers</h3>
<p>In the old days, if you wanted to run a program, you just typed its name and it ran immediately. But on HPC systems with hundreds of users and thousands of cores, we need a traffic controller:</p>
<p><strong>Real-world analogy</strong>: It’s like an airport control tower. Planes (jobs) can’t just land whenever they want – they need permission, runway assignments, and coordination to avoid crashes.</p>
</section>
<section id="the-lsf-load-sharing-facility-system" class="level3" data-number="0.2.2">
<h3 data-number="0.2.2" class="anchored" data-anchor-id="the-lsf-load-sharing-facility-system"><span class="header-section-number">0.2.2</span> The LSF (Load Sharing Facility) System</h3>
<p><code>bsub</code> is part of the LSF job scheduling system, which manages: - <strong>Queue management</strong>: Different types of jobs go to different queues - <strong>Resource allocation</strong>: Memory, CPU cores, time limits - <strong>Priority handling</strong>: Important jobs get preference - <strong>Load balancing</strong>: Distributing work across the cluster</p>
</section>
</section>
<section id="your-first-bsub-command" class="level2" data-number="0.3">
<h2 data-number="0.3" class="anchored" data-anchor-id="your-first-bsub-command"><span class="header-section-number">0.3</span> Your First bsub Command</h2>
<p>Let’s start with the simplest possible job submission:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="ex">bsub</span> <span class="st">"echo 'Hello HPC World!'"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>What happens</strong>: 1. Your job gets assigned a unique ID 2. It goes into a queue waiting for resources 3. When resources are available, it runs 4. Output gets saved to a file</p>
<p><strong>Real-world analogy</strong>: It’s like ordering food at a busy restaurant – you get a ticket number, wait in line, and eventually your order is prepared.</p>
</section>
<section id="understanding-job-output" class="level2" data-number="0.4">
<h2 data-number="0.4" class="anchored" data-anchor-id="understanding-job-output"><span class="header-section-number">0.4</span> Understanding Job Output</h2>
<p>When your job runs, LSF creates output files: - <code>LSFOUT.jobid</code> - Standard output (what your program prints) - <code>LSFERR.jobid</code> - Error messages (if something goes wrong)</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># Check your job output</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">cat</span> LSFOUT.12345    <span class="co"># Replace 12345 with your actual job ID</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="essential-bsub-options" class="level2" data-number="0.5">
<h2 data-number="0.5" class="anchored" data-anchor-id="essential-bsub-options"><span class="header-section-number">0.5</span> Essential bsub Options</h2>
<section id="specifying-resources" class="level3" data-number="0.5.1">
<h3 data-number="0.5.1" class="anchored" data-anchor-id="specifying-resources"><span class="header-section-number">0.5.1</span> Specifying Resources</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># Request specific number of cores</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="ex">bsub</span> <span class="at">-n</span> 4 <span class="st">"my_parallel_program"</span></span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co"># Request specific amount of memory</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="ex">bsub</span> <span class="at">-M</span> 8000 <span class="st">"memory_intensive_program"</span>    <span class="co"># 8GB memory</span></span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co"># Request specific runtime</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="ex">bsub</span> <span class="at">-W</span> 2:00 <span class="st">"quick_job"</span>                   <span class="co"># 2 hours max</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Real-world analogy</strong>: It’s like making a restaurant reservation – you tell them how many people (cores), what kind of table (memory), and how long you’ll stay (time).</p>
</section>
<section id="choosing-queues" class="level3" data-number="0.5.2">
<h3 data-number="0.5.2" class="anchored" data-anchor-id="choosing-queues"><span class="header-section-number">0.5.2</span> Choosing Queues</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># Submit to specific queue</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="ex">bsub</span> <span class="at">-q</span> normal <span class="st">"standard_job"</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="ex">bsub</span> <span class="at">-q</span> short <span class="st">"quick_analysis"</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="ex">bsub</span> <span class="at">-q</span> long <span class="st">"week_long_simulation"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Different queues have different characteristics: - <strong>short</strong>: Quick jobs, limited time, fast turnaround - <strong>normal</strong>: Standard jobs, moderate resources - <strong>long</strong>: Extended jobs, more time allowed - <strong>gpu</strong>: Jobs requiring GPU resources</p>
</section>
<section id="naming-your-jobs" class="level3" data-number="0.5.3">
<h3 data-number="0.5.3" class="anchored" data-anchor-id="naming-your-jobs"><span class="header-section-number">0.5.3</span> Naming Your Jobs</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># Give your job a meaningful name</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"data_analysis_2023"</span> <span class="st">"python analyze_data.py"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Real-world analogy</strong>: It’s like labeling boxes when moving – you’ll thank yourself later when you need to find something specific.</p>
</section>
</section>
<section id="real-world-hpc-scenarios" class="level2" data-number="0.6">
<h2 data-number="0.6" class="anchored" data-anchor-id="real-world-hpc-scenarios"><span class="header-section-number">0.6</span> Real-World HPC Scenarios</h2>
<section id="scenario-1-single-analysis-job" class="level3" data-number="0.6.1">
<h3 data-number="0.6.1" class="anchored" data-anchor-id="scenario-1-single-analysis-job"><span class="header-section-number">0.6.1</span> Scenario 1: Single Analysis Job</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># Analyze a large dataset</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"experiment_1_analysis"</span> <span class="dt">\</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>     <span class="at">-n</span> 8 <span class="dt">\</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>     <span class="at">-M</span> 16000 <span class="dt">\</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>     <span class="at">-W</span> 4:00 <span class="dt">\</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>     <span class="at">-o</span> analysis_%J.out <span class="dt">\</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>     <span class="at">-e</span> analysis_%J.err <span class="dt">\</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>     <span class="st">"python analyze_experiment.py --input data/experiment_1.csv"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Breaking it down</strong>: - <code>-J</code>: Job name for easy identification - <code>-n 8</code>: Use 8 CPU cores - <code>-M 16000</code>: Request 16GB memory - <code>-W 4:00</code>: Maximum 4 hours runtime - <code>-o/-e</code>: Custom output/error file names - <code>%J</code>: Gets replaced with job ID</p>
</section>
<section id="scenario-2-array-jobs-processing-multiple-files" class="level3" data-number="0.6.2">
<h3 data-number="0.6.2" class="anchored" data-anchor-id="scenario-2-array-jobs-processing-multiple-files"><span class="header-section-number">0.6.2</span> Scenario 2: Array Jobs (Processing Multiple Files)</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># Process 100 different input files</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"process_files[1-100]"</span> <span class="dt">\</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>     <span class="at">-n</span> 1 <span class="dt">\</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>     <span class="at">-M</span> 4000 <span class="dt">\</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>     <span class="at">-W</span> 1:00 <span class="dt">\</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>     <span class="at">-o</span> output_%I.out <span class="dt">\</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>     <span class="at">-e</span> error_%I.err <span class="dt">\</span></span>
<span id="cb7-8"><a href="#cb7-8"></a>     <span class="st">"python process_single_file.py --file data/file_</span><span class="dt">\$</span><span class="st">LSB_JOBINDEX.csv"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Array job magic</strong>: - <code>[1-100]</code>: Creates 100 separate jobs - <code>%I</code>: Gets replaced with array index (1, 2, 3, …) - <code>$LSB_JOBINDEX</code>: Environment variable containing the array index</p>
<p><strong>Real-world analogy</strong>: It’s like having 100 identical tasks and hiring 100 workers to do them simultaneously, each with a different input file.</p>
</section>
<section id="scenario-3-gpu-jobs" class="level3" data-number="0.6.3">
<h3 data-number="0.6.3" class="anchored" data-anchor-id="scenario-3-gpu-jobs"><span class="header-section-number">0.6.3</span> Scenario 3: GPU Jobs</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># Machine learning training on GPU</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"ml_training"</span> <span class="dt">\</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>     <span class="at">-q</span> gpu <span class="dt">\</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>     <span class="at">-gpu</span> <span class="st">"num=1:mode=exclusive_process"</span> <span class="dt">\</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>     <span class="at">-n</span> 4 <span class="dt">\</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>     <span class="at">-M</span> 32000 <span class="dt">\</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>     <span class="at">-W</span> 12:00 <span class="dt">\</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>     <span class="st">"python train_model.py --epochs 100"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="job-monitoring-and-management" class="level2" data-number="0.7">
<h2 data-number="0.7" class="anchored" data-anchor-id="job-monitoring-and-management"><span class="header-section-number">0.7</span> Job Monitoring and Management</h2>
<section id="checking-job-status" class="level3" data-number="0.7.1">
<h3 data-number="0.7.1" class="anchored" data-anchor-id="checking-job-status"><span class="header-section-number">0.7.1</span> Checking Job Status</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1"></a><span class="ex">bjobs</span>                    <span class="co"># Show all your jobs</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="ex">bjobs</span> <span class="at">-u</span> all            <span class="co"># Show all users' jobs</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="ex">bjobs</span> <span class="at">-r</span>                <span class="co"># Show only running jobs</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="ex">bjobs</span> <span class="at">-p</span>                <span class="co"># Show only pending jobs</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="ex">bjobs</span> 12345             <span class="co"># Show specific job details</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Job states you’ll see</strong>: - <strong>PEND</strong>: Waiting in queue - <strong>RUN</strong>: Currently running - <strong>DONE</strong>: Completed successfully - <strong>EXIT</strong>: Failed with error</p>
</section>
<section id="detailed-job-information" class="level3" data-number="0.7.2">
<h3 data-number="0.7.2" class="anchored" data-anchor-id="detailed-job-information"><span class="header-section-number">0.7.2</span> Detailed Job Information</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># Get detailed information about a job</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="ex">bjobs</span> <span class="at">-l</span> 12345          <span class="co"># Long format with all details</span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="ex">bpeek</span> 12345             <span class="co"># Peek at current output while job runs</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="managing-running-jobs" class="level3" data-number="0.7.3">
<h3 data-number="0.7.3" class="anchored" data-anchor-id="managing-running-jobs"><span class="header-section-number">0.7.3</span> Managing Running Jobs</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># Kill a job</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="ex">bkill</span> 12345             <span class="co"># Kill specific job</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="ex">bkill</span> <span class="at">-J</span> <span class="st">"job_name"</span>     <span class="co"># Kill job by name</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="ex">bkill</span> 0                 <span class="co"># Kill all your jobs (careful!)</span></span>
<span id="cb11-5"><a href="#cb11-5"></a></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co"># Suspend and resume jobs</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="ex">bstop</span> 12345             <span class="co"># Suspend job</span></span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="ex">bresume</span> 12345           <span class="co"># Resume suspended job</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Real-world analogy</strong>: It’s like having a remote control for your computational tasks – pause, stop, or check status anytime.</p>
</section>
</section>
<section id="advanced-bsub-techniques" class="level2" data-number="0.8">
<h2 data-number="0.8" class="anchored" data-anchor-id="advanced-bsub-techniques"><span class="header-section-number">0.8</span> Advanced bsub Techniques</h2>
<section id="job-dependencies" class="level3" data-number="0.8.1">
<h3 data-number="0.8.1" class="anchored" data-anchor-id="job-dependencies"><span class="header-section-number">0.8.1</span> Job Dependencies</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># Job B waits for Job A to complete</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="va">JOB_A</span><span class="op">=</span><span class="va">$(</span><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"prepare_data"</span> <span class="st">"python prepare.py"</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-o</span> <span class="st">'[0-9]*'</span><span class="va">)</span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"analyze_data"</span> <span class="at">-w</span> <span class="st">"done(</span><span class="va">$JOB_A</span><span class="st">)"</span> <span class="st">"python analyze.py"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Real-world analogy</strong>: It’s like a cooking recipe where you can’t start step 3 until step 2 is finished.</p>
</section>
<section id="resource-specifications" class="level3" data-number="0.8.2">
<h3 data-number="0.8.2" class="anchored" data-anchor-id="resource-specifications"><span class="header-section-number">0.8.2</span> Resource Specifications</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># Complex resource requirements</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"complex_job"</span> <span class="dt">\</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>     <span class="at">-n</span> 16 <span class="dt">\</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>     <span class="at">-R</span> <span class="st">"span[hosts=1]"</span> <span class="dt">\</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>     <span class="at">-R</span> <span class="st">"rusage[mem=4000]"</span> <span class="dt">\</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>     <span class="at">-R</span> <span class="st">"select[model==Intel_Platinum]"</span> <span class="dt">\</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>     <span class="at">-W</span> 24:00 <span class="dt">\</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>     <span class="st">"mpi_program"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Resource options explained</strong>: - <code>span[hosts=1]</code>: All cores on same physical machine - <code>rusage[mem=4000]</code>: 4GB memory per core - <code>select[model==Intel_Platinum]</code>: Specific CPU type</p>
</section>
<section id="interactive-jobs" class="level3" data-number="0.8.3">
<h3 data-number="0.8.3" class="anchored" data-anchor-id="interactive-jobs"><span class="header-section-number">0.8.3</span> Interactive Jobs</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># Get interactive shell on compute node</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="ex">bsub</span> <span class="at">-Is</span> <span class="at">-n</span> 4 <span class="at">-M</span> 8000 <span class="at">-W</span> 2:00 bash</span>
<span id="cb14-3"><a href="#cb14-3"></a></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="co"># Interactive with X11 forwarding (for GUI applications)</span></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="ex">bsub</span> <span class="at">-Is</span> <span class="at">-XF</span> <span class="at">-n</span> 1 <span class="at">-M</span> 4000 <span class="at">-W</span> 1:00 bash</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Real-world analogy</strong>: Instead of sending a letter (batch job), you’re making a phone call (interactive session).</p>
</section>
</section>
<section id="professional-job-submission-scripts" class="level2" data-number="0.9">
<h2 data-number="0.9" class="anchored" data-anchor-id="professional-job-submission-scripts"><span class="header-section-number">0.9</span> Professional Job Submission Scripts</h2>
<section id="the-standard-job-script-template" class="level3" data-number="0.9.1">
<h3 data-number="0.9.1" class="anchored" data-anchor-id="the-standard-job-script-template"><span class="header-section-number">0.9.1</span> The Standard Job Script Template</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="co">#BSUB -J "my_analysis"</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="co">#BSUB -n 8</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="co">#BSUB -M 16000</span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co">#BSUB -W 6:00</span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="co">#BSUB -o output_%J.out</span></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="co">#BSUB -e error_%J.err</span></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co">#BSUB -q normal</span></span>
<span id="cb15-9"><a href="#cb15-9"></a></span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="co"># Load required modules</span></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="ex">module</span> load python/3.9</span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="ex">module</span> load numpy/1.21</span>
<span id="cb15-13"><a href="#cb15-13"></a></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co"># Set up environment</span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="bu">export</span> <span class="va">OMP_NUM_THREADS</span><span class="op">=</span>8</span>
<span id="cb15-16"><a href="#cb15-16"></a><span class="bu">cd</span> /scratch/username/project</span>
<span id="cb15-17"><a href="#cb15-17"></a></span>
<span id="cb15-18"><a href="#cb15-18"></a><span class="co"># Run the analysis</span></span>
<span id="cb15-19"><a href="#cb15-19"></a><span class="bu">echo</span> <span class="st">"Starting analysis at </span><span class="va">$(</span><span class="fu">date</span><span class="va">)</span><span class="st">"</span></span>
<span id="cb15-20"><a href="#cb15-20"></a><span class="ex">python</span> analyze_data.py <span class="at">--input</span> data/experiment.csv <span class="at">--output</span> results/</span>
<span id="cb15-21"><a href="#cb15-21"></a><span class="bu">echo</span> <span class="st">"Analysis completed at </span><span class="va">$(</span><span class="fu">date</span><span class="va">)</span><span class="st">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Usage</strong>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">chmod</span> +x job_script.sh</span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="ex">bsub</span> <span class="op">&lt;</span> job_script.sh</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="array-job-script-for-multiple-files" class="level3" data-number="0.9.2">
<h3 data-number="0.9.2" class="anchored" data-anchor-id="array-job-script-for-multiple-files"><span class="header-section-number">0.9.2</span> Array Job Script for Multiple Files</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="co">#BSUB -J "process_files[1-50]"</span></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="co">#BSUB -n 1</span></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="co">#BSUB -M 4000</span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co">#BSUB -W 2:00</span></span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="co">#BSUB -o output_%I.out</span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co">#BSUB -e error_%I.err</span></span>
<span id="cb17-8"><a href="#cb17-8"></a></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="co"># Load modules</span></span>
<span id="cb17-10"><a href="#cb17-10"></a><span class="ex">module</span> load python/3.9</span>
<span id="cb17-11"><a href="#cb17-11"></a></span>
<span id="cb17-12"><a href="#cb17-12"></a><span class="co"># Get the input file for this array job</span></span>
<span id="cb17-13"><a href="#cb17-13"></a><span class="va">INPUT_FILE</span><span class="op">=</span><span class="st">"data/file_</span><span class="va">${LSB_JOBINDEX}</span><span class="st">.csv"</span></span>
<span id="cb17-14"><a href="#cb17-14"></a><span class="va">OUTPUT_FILE</span><span class="op">=</span><span class="st">"results/result_</span><span class="va">${LSB_JOBINDEX}</span><span class="st">.csv"</span></span>
<span id="cb17-15"><a href="#cb17-15"></a></span>
<span id="cb17-16"><a href="#cb17-16"></a><span class="co"># Process the file</span></span>
<span id="cb17-17"><a href="#cb17-17"></a><span class="bu">echo</span> <span class="st">"Processing </span><span class="va">$INPUT_FILE</span><span class="st">"</span></span>
<span id="cb17-18"><a href="#cb17-18"></a><span class="ex">python</span> process_single.py <span class="at">--input</span> <span class="va">$INPUT_FILE</span> <span class="at">--output</span> <span class="va">$OUTPUT_FILE</span></span>
<span id="cb17-19"><a href="#cb17-19"></a><span class="bu">echo</span> <span class="st">"Completed processing </span><span class="va">$INPUT_FILE</span><span class="st">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="monitoring-system-resources" class="level2" data-number="0.10">
<h2 data-number="0.10" class="anchored" data-anchor-id="monitoring-system-resources"><span class="header-section-number">0.10</span> Monitoring System Resources</h2>
<section id="cluster-status" class="level3" data-number="0.10.1">
<h3 data-number="0.10.1" class="anchored" data-anchor-id="cluster-status"><span class="header-section-number">0.10.1</span> Cluster Status</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1"></a><span class="co"># Check queue status</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="ex">bqueues</span>                 <span class="co"># Show all queues and their status</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="ex">bhosts</span>                  <span class="co"># Show compute nodes and their status</span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="ex">lsload</span>                  <span class="co"># Show current system load</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="your-resource-usage" class="level3" data-number="0.10.2">
<h3 data-number="0.10.2" class="anchored" data-anchor-id="your-resource-usage"><span class="header-section-number">0.10.2</span> Your Resource Usage</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1"></a><span class="co"># Check your job history</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="ex">bhist</span>                   <span class="co"># Recent job history</span></span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="ex">bhist</span> <span class="at">-l</span> 12345         <span class="co"># Detailed history for specific job</span></span>
<span id="cb19-4"><a href="#cb19-4"></a></span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="co"># Check current usage</span></span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="ex">busers</span>                  <span class="co"># Show user resource usage</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="common-hpc-job-patterns" class="level2" data-number="0.11">
<h2 data-number="0.11" class="anchored" data-anchor-id="common-hpc-job-patterns"><span class="header-section-number">0.11</span> Common HPC Job Patterns</h2>
<section id="pattern-1-parameter-sweep" class="level3" data-number="0.11.1">
<h3 data-number="0.11.1" class="anchored" data-anchor-id="pattern-1-parameter-sweep"><span class="header-section-number">0.11.1</span> Pattern 1: Parameter Sweep</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1"></a><span class="co"># Test different parameters</span></span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="cf">for</span> param <span class="kw">in</span> 0.1 0.5 1.0 2.0 5.0<span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>    <span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"param_</span><span class="va">$param</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb20-4"><a href="#cb20-4"></a>         <span class="at">-n</span> 4 <span class="at">-M</span> 8000 <span class="at">-W</span> 3:00 <span class="dt">\</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>         <span class="st">"python experiment.py --parameter </span><span class="va">$param</span><span class="st">"</span></span>
<span id="cb20-6"><a href="#cb20-6"></a><span class="cf">done</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="pattern-2-pipeline-processing" class="level3" data-number="0.11.2">
<h3 data-number="0.11.2" class="anchored" data-anchor-id="pattern-2-pipeline-processing"><span class="header-section-number">0.11.2</span> Pattern 2: Pipeline Processing</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># Multi-stage pipeline</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="va">STAGE1</span><span class="op">=</span><span class="va">$(</span><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"stage1"</span> <span class="st">"python preprocess.py"</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-o</span> <span class="st">'[0-9]*'</span><span class="va">)</span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="va">STAGE2</span><span class="op">=</span><span class="va">$(</span><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"stage2"</span> <span class="at">-w</span> <span class="st">"done(</span><span class="va">$STAGE1</span><span class="st">)"</span> <span class="st">"python analyze.py"</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-o</span> <span class="st">'[0-9]*'</span><span class="va">)</span></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"stage3"</span> <span class="at">-w</span> <span class="st">"done(</span><span class="va">$STAGE2</span><span class="st">)"</span> <span class="st">"python visualize.py"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="pattern-3-embarrassingly-parallel" class="level3" data-number="0.11.3">
<h3 data-number="0.11.3" class="anchored" data-anchor-id="pattern-3-embarrassingly-parallel"><span class="header-section-number">0.11.3</span> Pattern 3: Embarrassingly Parallel</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1"></a><span class="co"># Process 1000 independent tasks</span></span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"parallel_tasks[1-1000]"</span> <span class="dt">\</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>     <span class="at">-n</span> 1 <span class="at">-M</span> 2000 <span class="at">-W</span> 0:30 <span class="dt">\</span></span>
<span id="cb22-4"><a href="#cb22-4"></a>     <span class="st">"python independent_task.py --task_id </span><span class="dt">\$</span><span class="st">LSB_JOBINDEX"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="troubleshooting-common-issues" class="level2" data-number="0.12">
<h2 data-number="0.12" class="anchored" data-anchor-id="troubleshooting-common-issues"><span class="header-section-number">0.12</span> Troubleshooting Common Issues</h2>
<section id="problem-1-job-stays-in-pend-state" class="level3" data-number="0.12.1">
<h3 data-number="0.12.1" class="anchored" data-anchor-id="problem-1-job-stays-in-pend-state"><span class="header-section-number">0.12.1</span> Problem 1: Job Stays in PEND State</h3>
<p><strong>Symptoms</strong>: Job never starts running <strong>Possible causes</strong>: - Requesting too many resources - Wrong queue selection - System maintenance</p>
<p><strong>Solutions</strong>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># Check why job is pending</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="ex">bjobs</span> <span class="at">-p</span> <span class="at">-l</span> 12345       <span class="co"># Look for pending reason</span></span>
<span id="cb23-3"><a href="#cb23-3"></a></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="co"># Try smaller resource request</span></span>
<span id="cb23-5"><a href="#cb23-5"></a><span class="ex">bsub</span> <span class="at">-n</span> 2 <span class="at">-M</span> 4000 <span class="st">"program"</span>    <span class="co"># Instead of -n 16 -M 64000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="problem-2-job-exits-immediately" class="level3" data-number="0.12.2">
<h3 data-number="0.12.2" class="anchored" data-anchor-id="problem-2-job-exits-immediately"><span class="header-section-number">0.12.2</span> Problem 2: Job Exits Immediately</h3>
<p><strong>Symptoms</strong>: Job shows EXIT status quickly <strong>Solutions</strong>:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1"></a><span class="co"># Check error output</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="fu">cat</span> LSFERR.12345</span>
<span id="cb24-3"><a href="#cb24-3"></a></span>
<span id="cb24-4"><a href="#cb24-4"></a><span class="co"># Common issues:</span></span>
<span id="cb24-5"><a href="#cb24-5"></a><span class="co"># - Wrong file paths</span></span>
<span id="cb24-6"><a href="#cb24-6"></a><span class="co"># - Missing modules</span></span>
<span id="cb24-7"><a href="#cb24-7"></a><span class="co"># - Insufficient memory</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="problem-3-out-of-memory-errors" class="level3" data-number="0.12.3">
<h3 data-number="0.12.3" class="anchored" data-anchor-id="problem-3-out-of-memory-errors"><span class="header-section-number">0.12.3</span> Problem 3: Out of Memory Errors</h3>
<p><strong>Symptoms</strong>: Job killed due to memory usage <strong>Solutions</strong>:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1"></a><span class="co"># Request more memory</span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="ex">bsub</span> <span class="at">-M</span> 32000 <span class="st">"memory_intensive_program"</span></span>
<span id="cb25-3"><a href="#cb25-3"></a></span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="co"># Or optimize your program to use less memory</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="best-practices-for-hpc-job-management" class="level2" data-number="0.13">
<h2 data-number="0.13" class="anchored" data-anchor-id="best-practices-for-hpc-job-management"><span class="header-section-number">0.13</span> Best Practices for HPC Job Management</h2>
<section id="resource-estimation" class="level3" data-number="0.13.1">
<h3 data-number="0.13.1" class="anchored" data-anchor-id="resource-estimation"><span class="header-section-number">0.13.1</span> 1. Resource Estimation</h3>
<ul>
<li><strong>Start small</strong>: Test with small datasets first</li>
<li><strong>Monitor usage</strong>: Check actual resource consumption</li>
<li><strong>Scale appropriately</strong>: Don’t over-request resources</li>
</ul>
</section>
<section id="job-organization" class="level3" data-number="0.13.2">
<h3 data-number="0.13.2" class="anchored" data-anchor-id="job-organization"><span class="header-section-number">0.13.2</span> 2. Job Organization</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1"></a><span class="co"># Use meaningful names</span></span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"experiment_2023_12_15_batch_1"</span> <span class="st">"program"</span></span>
<span id="cb26-3"><a href="#cb26-3"></a></span>
<span id="cb26-4"><a href="#cb26-4"></a><span class="co"># Organize output files</span></span>
<span id="cb26-5"><a href="#cb26-5"></a><span class="ex">bsub</span> <span class="at">-o</span> logs/output_%J.out <span class="at">-e</span> logs/error_%J.err <span class="st">"program"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="error-handling" class="level3" data-number="0.13.3">
<h3 data-number="0.13.3" class="anchored" data-anchor-id="error-handling"><span class="header-section-number">0.13.3</span> 3. Error Handling</h3>
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1"></a><span class="co"># Add error checking to your scripts</span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="co">#!/bin/bash</span></span>
<span id="cb27-3"><a href="#cb27-3"></a><span class="bu">set</span> <span class="at">-e</span>                  <span class="co"># Exit on any error</span></span>
<span id="cb27-4"><a href="#cb27-4"></a><span class="bu">set</span> <span class="at">-u</span>                  <span class="co"># Exit on undefined variables</span></span>
<span id="cb27-5"><a href="#cb27-5"></a></span>
<span id="cb27-6"><a href="#cb27-6"></a><span class="co"># Your commands here</span></span>
<span id="cb27-7"><a href="#cb27-7"></a><span class="ex">python</span> analysis.py <span class="kw">||</span> <span class="kw">{</span> <span class="bu">echo</span> <span class="st">"Analysis failed"</span><span class="kw">;</span> <span class="bu">exit</span> 1<span class="kw">;</span> <span class="kw">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="quick-reference-bsub-command-cheat-sheet" class="level2" data-number="0.14">
<h2 data-number="0.14" class="anchored" data-anchor-id="quick-reference-bsub-command-cheat-sheet"><span class="header-section-number">0.14</span> Quick Reference: bsub Command Cheat Sheet</h2>
<table class="table">
<thead>
<tr class="header">
<th>Task</th>
<th>Command</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Submit simple job</td>
<td><code>bsub "command"</code></td>
<td>Basic job submission</td>
</tr>
<tr class="even">
<td>Request resources</td>
<td><code>bsub -n 4 -M 8000 "cmd"</code></td>
<td>4 cores, 8GB memory</td>
</tr>
<tr class="odd">
<td>Set time limit</td>
<td><code>bsub -W 2:00 "cmd"</code></td>
<td>2 hour maximum</td>
</tr>
<tr class="even">
<td>Choose queue</td>
<td><code>bsub -q gpu "cmd"</code></td>
<td>Submit to GPU queue</td>
</tr>
<tr class="odd">
<td>Array jobs</td>
<td><code>bsub -J "job[1-100]" "cmd"</code></td>
<td>100 parallel jobs</td>
</tr>
<tr class="even">
<td>Job dependency</td>
<td><code>bsub -w "done(123)" "cmd"</code></td>
<td>Wait for job 123</td>
</tr>
<tr class="odd">
<td>Interactive job</td>
<td><code>bsub -Is bash</code></td>
<td>Interactive session</td>
</tr>
<tr class="even">
<td>Check jobs</td>
<td><code>bjobs</code></td>
<td>Show job status</td>
</tr>
<tr class="odd">
<td>Kill job</td>
<td><code>bkill 12345</code></td>
<td>Cancel job</td>
</tr>
<tr class="even">
<td>Job details</td>
<td><code>bjobs -l 12345</code></td>
<td>Detailed information</td>
</tr>
</tbody>
</table>
</section>
<section id="practice-exercises" class="level2" data-number="0.15">
<h2 data-number="0.15" class="anchored" data-anchor-id="practice-exercises"><span class="header-section-number">0.15</span> Practice Exercises</h2>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Your HPC Orchestra Training
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Submit your first job</strong></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"hello_hpc"</span> <span class="st">"echo 'Hello from HPC cluster!'"</span></span>
<span id="cb28-2"><a href="#cb28-2"></a><span class="ex">bjobs</span>    <span class="co"># Check status</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Create an array job</strong></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"test_array[1-5]"</span> <span class="st">"echo 'Task number </span><span class="dt">\$</span><span class="st">LSB_JOBINDEX'"</span></span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="ex">bjobs</span>    <span class="co"># Watch multiple jobs</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Submit a resource-intensive job</strong></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"resource_test"</span> <span class="at">-n</span> 4 <span class="at">-M</span> 8000 <span class="at">-W</span> 0:10 <span class="st">"sleep 300"</span></span>
<span id="cb30-2"><a href="#cb30-2"></a><span class="ex">bjobs</span> <span class="at">-l</span> <span class="pp">[</span><span class="ss">job_id</span><span class="pp">]</span>    <span class="co"># Check resource allocation</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Practice job control</strong></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"long_job"</span> <span class="st">"sleep 600"</span>    <span class="co"># Submit long job</span></span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="ex">bjobs</span>                             <span class="co"># Note job ID</span></span>
<span id="cb31-3"><a href="#cb31-3"></a><span class="ex">bstop</span> <span class="pp">[</span><span class="ss">job_id</span><span class="pp">]</span>                   <span class="co"># Suspend it</span></span>
<span id="cb31-4"><a href="#cb31-4"></a><span class="ex">bresume</span> <span class="pp">[</span><span class="ss">job_id</span><span class="pp">]</span>                 <span class="co"># Resume it</span></span>
<span id="cb31-5"><a href="#cb31-5"></a><span class="ex">bkill</span> <span class="pp">[</span><span class="ss">job_id</span><span class="pp">]</span>                   <span class="co"># Kill it</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</div>
</div>
</section>
<section id="whats-next" class="level2" data-number="0.16">
<h2 data-number="0.16" class="anchored" data-anchor-id="whats-next"><span class="header-section-number">0.16</span> What’s Next?</h2>
<p>Now that you can orchestrate computational jobs like a professional, you’re ready to learn <a href="../../../posts/series/command-line-mastery/10-parallel-processing.html">Parallel Processing Patterns</a>. We’ll explore GNU parallel and advanced techniques for maximizing your computational throughput.</p>
<p>Remember: HPC job scheduling is about being a good citizen in a shared computational environment while maximizing your research productivity. Master these patterns, and you’ll be able to handle computational workloads that would be impossible on a single machine.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
HPC Mastery Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<p>Before moving on, try these real-world scenarios: 1. Submit 10 jobs that each process a different parameter value 2. Create a pipeline where job B waits for job A to complete 3. Submit an interactive job and explore the compute node 4. Monitor resource usage of a running job</p>
<p>This practice will prepare you for managing complex computational workflows!</p>
</div>
</div>
<hr>
<p><em>You’ve learned to conduct your computational orchestra with bsub. Next, we’ll explore advanced parallel processing techniques that will make your HPC workflows even more powerful!</em></p>


<!-- -->

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div>CC BY-NC-SA 4.0</div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{2025,
  author = {, Hasan},
  title = {HPC {Job} {Scheduling} with Bsub},
  date = {2025-06-29},
  url = {https://hasangoni.quarto.pub/hasan-blog-post/posts/series/command-line-mastery/09-hpc-job-scheduling.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-2025" class="csl-entry quarto-appendix-citeas" role="listitem">
Hasan. 2025. <span>“HPC Job Scheduling with Bsub.”</span> June 29, 2025.
<a href="https://hasangoni.quarto.pub/hasan-blog-post/posts/series/command-line-mastery/09-hpc-job-scheduling.html">https://hasangoni.quarto.pub/hasan-blog-post/posts/series/command-line-mastery/09-hpc-job-scheduling.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="yourusername/quarto_blog_hasan" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
<script src="https://giscus.app/client.js" data-repo="HasanGoni/quarto_blog_hasan" data-repo-id="" data-category="General" data-category-id="" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb32" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb32-1"><a href="#cb32-1"></a><span class="co">---</span></span>
<span id="cb32-2"><a href="#cb32-2"></a><span class="an">title:</span><span class="co"> "HPC Job Scheduling with bsub"</span></span>
<span id="cb32-3"><a href="#cb32-3"></a><span class="an">description:</span><span class="co"> "Master the art of submitting and managing computational jobs on HPC clusters using bsub. Learn to orchestrate hundreds of parallel jobs, monitor resources, and handle complex workflows like a professional researcher."</span></span>
<span id="cb32-4"><a href="#cb32-4"></a><span class="an">author:</span><span class="co"> "Hasan"</span></span>
<span id="cb32-5"><a href="#cb32-5"></a><span class="an">date:</span><span class="co"> last-modified</span></span>
<span id="cb32-6"><a href="#cb32-6"></a><span class="an">categories:</span><span class="co"> [command-line, hpc, bsub, job-scheduling, parallel-computing]</span></span>
<span id="cb32-7"><a href="#cb32-7"></a><span class="an">image:</span><span class="co"> "https://images.unsplash.com/photo-1629654297299-c8506221ca97?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=2000&amp;q=80"</span></span>
<span id="cb32-8"><a href="#cb32-8"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb32-9"><a href="#cb32-9"></a><span class="co">---</span></span>
<span id="cb32-10"><a href="#cb32-10"></a></span>
<span id="cb32-11"><a href="#cb32-11"></a><span class="fu">## The Story: The Computational Orchestra</span></span>
<span id="cb32-12"><a href="#cb32-12"></a></span>
<span id="cb32-13"><a href="#cb32-13"></a>Imagine you're a conductor of a massive orchestra with 1,000 musicians (CPU cores), but instead of playing music, they're processing your research data. You need to coordinate when each musician plays, what piece they perform, and ensure they don't interfere with each other. Some pieces need the entire string section, others just a solo violin.</span>
<span id="cb32-14"><a href="#cb32-14"></a></span>
<span id="cb32-15"><a href="#cb32-15"></a>This is exactly what HPC job scheduling is about. The <span class="in">`bsub`</span> command is your conductor's baton, allowing you to orchestrate computational jobs across hundreds or thousands of processors. Today, you'll learn to conduct your own computational symphony.</span>
<span id="cb32-16"><a href="#cb32-16"></a></span>
<span id="cb32-17"><a href="#cb32-17"></a><span class="fu">## Understanding HPC Job Scheduling</span></span>
<span id="cb32-18"><a href="#cb32-18"></a></span>
<span id="cb32-19"><a href="#cb32-19"></a><span class="fu">### Why We Need Job Schedulers</span></span>
<span id="cb32-20"><a href="#cb32-20"></a></span>
<span id="cb32-21"><a href="#cb32-21"></a>In the old days, if you wanted to run a program, you just typed its name and it ran immediately. But on HPC systems with hundreds of users and thousands of cores, we need a traffic controller:</span>
<span id="cb32-22"><a href="#cb32-22"></a></span>
<span id="cb32-23"><a href="#cb32-23"></a>**Real-world analogy**: It's like an airport control tower. Planes (jobs) can't just land whenever they want – they need permission, runway assignments, and coordination to avoid crashes.</span>
<span id="cb32-24"><a href="#cb32-24"></a></span>
<span id="cb32-25"><a href="#cb32-25"></a><span class="fu">### The LSF (Load Sharing Facility) System</span></span>
<span id="cb32-26"><a href="#cb32-26"></a></span>
<span id="cb32-27"><a href="#cb32-27"></a><span class="in">`bsub`</span> is part of the LSF job scheduling system, which manages:</span>
<span id="cb32-28"><a href="#cb32-28"></a><span class="ss">- </span>**Queue management**: Different types of jobs go to different queues</span>
<span id="cb32-29"><a href="#cb32-29"></a><span class="ss">- </span>**Resource allocation**: Memory, CPU cores, time limits</span>
<span id="cb32-30"><a href="#cb32-30"></a><span class="ss">- </span>**Priority handling**: Important jobs get preference</span>
<span id="cb32-31"><a href="#cb32-31"></a><span class="ss">- </span>**Load balancing**: Distributing work across the cluster</span>
<span id="cb32-32"><a href="#cb32-32"></a></span>
<span id="cb32-33"><a href="#cb32-33"></a><span class="fu">## Your First bsub Command</span></span>
<span id="cb32-34"><a href="#cb32-34"></a></span>
<span id="cb32-35"><a href="#cb32-35"></a>Let's start with the simplest possible job submission:</span>
<span id="cb32-36"><a href="#cb32-36"></a></span>
<span id="cb32-37"><a href="#cb32-37"></a><span class="in">```bash</span></span>
<span id="cb32-38"><a href="#cb32-38"></a><span class="ex">bsub</span> <span class="st">"echo 'Hello HPC World!'"</span></span>
<span id="cb32-39"><a href="#cb32-39"></a><span class="in">```</span></span>
<span id="cb32-40"><a href="#cb32-40"></a></span>
<span id="cb32-41"><a href="#cb32-41"></a>**What happens**:</span>
<span id="cb32-42"><a href="#cb32-42"></a><span class="ss">1. </span>Your job gets assigned a unique ID</span>
<span id="cb32-43"><a href="#cb32-43"></a><span class="ss">2. </span>It goes into a queue waiting for resources</span>
<span id="cb32-44"><a href="#cb32-44"></a><span class="ss">3. </span>When resources are available, it runs</span>
<span id="cb32-45"><a href="#cb32-45"></a><span class="ss">4. </span>Output gets saved to a file</span>
<span id="cb32-46"><a href="#cb32-46"></a></span>
<span id="cb32-47"><a href="#cb32-47"></a>**Real-world analogy**: It's like ordering food at a busy restaurant – you get a ticket number, wait in line, and eventually your order is prepared.</span>
<span id="cb32-48"><a href="#cb32-48"></a></span>
<span id="cb32-49"><a href="#cb32-49"></a><span class="fu">## Understanding Job Output</span></span>
<span id="cb32-50"><a href="#cb32-50"></a></span>
<span id="cb32-51"><a href="#cb32-51"></a>When your job runs, LSF creates output files:</span>
<span id="cb32-52"><a href="#cb32-52"></a><span class="ss">- </span><span class="in">`LSFOUT.jobid`</span> - Standard output (what your program prints)</span>
<span id="cb32-53"><a href="#cb32-53"></a><span class="ss">- </span><span class="in">`LSFERR.jobid`</span> - Error messages (if something goes wrong)</span>
<span id="cb32-54"><a href="#cb32-54"></a></span>
<span id="cb32-55"><a href="#cb32-55"></a><span class="in">```bash</span></span>
<span id="cb32-56"><a href="#cb32-56"></a><span class="co"># Check your job output</span></span>
<span id="cb32-57"><a href="#cb32-57"></a><span class="fu">cat</span> LSFOUT.12345    <span class="co"># Replace 12345 with your actual job ID</span></span>
<span id="cb32-58"><a href="#cb32-58"></a><span class="in">```</span></span>
<span id="cb32-59"><a href="#cb32-59"></a></span>
<span id="cb32-60"><a href="#cb32-60"></a><span class="fu">## Essential bsub Options</span></span>
<span id="cb32-61"><a href="#cb32-61"></a></span>
<span id="cb32-62"><a href="#cb32-62"></a><span class="fu">### Specifying Resources</span></span>
<span id="cb32-63"><a href="#cb32-63"></a></span>
<span id="cb32-64"><a href="#cb32-64"></a><span class="in">```bash</span></span>
<span id="cb32-65"><a href="#cb32-65"></a><span class="co"># Request specific number of cores</span></span>
<span id="cb32-66"><a href="#cb32-66"></a><span class="ex">bsub</span> <span class="at">-n</span> 4 <span class="st">"my_parallel_program"</span></span>
<span id="cb32-67"><a href="#cb32-67"></a></span>
<span id="cb32-68"><a href="#cb32-68"></a><span class="co"># Request specific amount of memory</span></span>
<span id="cb32-69"><a href="#cb32-69"></a><span class="ex">bsub</span> <span class="at">-M</span> 8000 <span class="st">"memory_intensive_program"</span>    <span class="co"># 8GB memory</span></span>
<span id="cb32-70"><a href="#cb32-70"></a></span>
<span id="cb32-71"><a href="#cb32-71"></a><span class="co"># Request specific runtime</span></span>
<span id="cb32-72"><a href="#cb32-72"></a><span class="ex">bsub</span> <span class="at">-W</span> 2:00 <span class="st">"quick_job"</span>                   <span class="co"># 2 hours max</span></span>
<span id="cb32-73"><a href="#cb32-73"></a><span class="in">```</span></span>
<span id="cb32-74"><a href="#cb32-74"></a></span>
<span id="cb32-75"><a href="#cb32-75"></a>**Real-world analogy**: It's like making a restaurant reservation – you tell them how many people (cores), what kind of table (memory), and how long you'll stay (time).</span>
<span id="cb32-76"><a href="#cb32-76"></a></span>
<span id="cb32-77"><a href="#cb32-77"></a><span class="fu">### Choosing Queues</span></span>
<span id="cb32-78"><a href="#cb32-78"></a></span>
<span id="cb32-79"><a href="#cb32-79"></a><span class="in">```bash</span></span>
<span id="cb32-80"><a href="#cb32-80"></a><span class="co"># Submit to specific queue</span></span>
<span id="cb32-81"><a href="#cb32-81"></a><span class="ex">bsub</span> <span class="at">-q</span> normal <span class="st">"standard_job"</span></span>
<span id="cb32-82"><a href="#cb32-82"></a><span class="ex">bsub</span> <span class="at">-q</span> short <span class="st">"quick_analysis"</span></span>
<span id="cb32-83"><a href="#cb32-83"></a><span class="ex">bsub</span> <span class="at">-q</span> long <span class="st">"week_long_simulation"</span></span>
<span id="cb32-84"><a href="#cb32-84"></a><span class="in">```</span></span>
<span id="cb32-85"><a href="#cb32-85"></a></span>
<span id="cb32-86"><a href="#cb32-86"></a>Different queues have different characteristics:</span>
<span id="cb32-87"><a href="#cb32-87"></a><span class="ss">- </span>**short**: Quick jobs, limited time, fast turnaround</span>
<span id="cb32-88"><a href="#cb32-88"></a><span class="ss">- </span>**normal**: Standard jobs, moderate resources</span>
<span id="cb32-89"><a href="#cb32-89"></a><span class="ss">- </span>**long**: Extended jobs, more time allowed</span>
<span id="cb32-90"><a href="#cb32-90"></a><span class="ss">- </span>**gpu**: Jobs requiring GPU resources</span>
<span id="cb32-91"><a href="#cb32-91"></a></span>
<span id="cb32-92"><a href="#cb32-92"></a><span class="fu">### Naming Your Jobs</span></span>
<span id="cb32-93"><a href="#cb32-93"></a></span>
<span id="cb32-94"><a href="#cb32-94"></a><span class="in">```bash</span></span>
<span id="cb32-95"><a href="#cb32-95"></a><span class="co"># Give your job a meaningful name</span></span>
<span id="cb32-96"><a href="#cb32-96"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"data_analysis_2023"</span> <span class="st">"python analyze_data.py"</span></span>
<span id="cb32-97"><a href="#cb32-97"></a><span class="in">```</span></span>
<span id="cb32-98"><a href="#cb32-98"></a></span>
<span id="cb32-99"><a href="#cb32-99"></a>**Real-world analogy**: It's like labeling boxes when moving – you'll thank yourself later when you need to find something specific.</span>
<span id="cb32-100"><a href="#cb32-100"></a></span>
<span id="cb32-101"><a href="#cb32-101"></a><span class="fu">## Real-World HPC Scenarios</span></span>
<span id="cb32-102"><a href="#cb32-102"></a></span>
<span id="cb32-103"><a href="#cb32-103"></a><span class="fu">### Scenario 1: Single Analysis Job</span></span>
<span id="cb32-104"><a href="#cb32-104"></a></span>
<span id="cb32-105"><a href="#cb32-105"></a><span class="in">```bash</span></span>
<span id="cb32-106"><a href="#cb32-106"></a><span class="co"># Analyze a large dataset</span></span>
<span id="cb32-107"><a href="#cb32-107"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"experiment_1_analysis"</span> <span class="dt">\</span></span>
<span id="cb32-108"><a href="#cb32-108"></a>     <span class="at">-n</span> 8 <span class="dt">\</span></span>
<span id="cb32-109"><a href="#cb32-109"></a>     <span class="at">-M</span> 16000 <span class="dt">\</span></span>
<span id="cb32-110"><a href="#cb32-110"></a>     <span class="at">-W</span> 4:00 <span class="dt">\</span></span>
<span id="cb32-111"><a href="#cb32-111"></a>     <span class="at">-o</span> analysis_%J.out <span class="dt">\</span></span>
<span id="cb32-112"><a href="#cb32-112"></a>     <span class="at">-e</span> analysis_%J.err <span class="dt">\</span></span>
<span id="cb32-113"><a href="#cb32-113"></a>     <span class="st">"python analyze_experiment.py --input data/experiment_1.csv"</span></span>
<span id="cb32-114"><a href="#cb32-114"></a><span class="in">```</span></span>
<span id="cb32-115"><a href="#cb32-115"></a></span>
<span id="cb32-116"><a href="#cb32-116"></a>**Breaking it down**:</span>
<span id="cb32-117"><a href="#cb32-117"></a><span class="ss">- </span><span class="in">`-J`</span>: Job name for easy identification</span>
<span id="cb32-118"><a href="#cb32-118"></a><span class="ss">- </span><span class="in">`-n 8`</span>: Use 8 CPU cores</span>
<span id="cb32-119"><a href="#cb32-119"></a><span class="ss">- </span><span class="in">`-M 16000`</span>: Request 16GB memory</span>
<span id="cb32-120"><a href="#cb32-120"></a><span class="ss">- </span><span class="in">`-W 4:00`</span>: Maximum 4 hours runtime</span>
<span id="cb32-121"><a href="#cb32-121"></a><span class="ss">- </span><span class="in">`-o/-e`</span>: Custom output/error file names</span>
<span id="cb32-122"><a href="#cb32-122"></a><span class="ss">- </span><span class="in">`%J`</span>: Gets replaced with job ID</span>
<span id="cb32-123"><a href="#cb32-123"></a></span>
<span id="cb32-124"><a href="#cb32-124"></a><span class="fu">### Scenario 2: Array Jobs (Processing Multiple Files)</span></span>
<span id="cb32-125"><a href="#cb32-125"></a></span>
<span id="cb32-126"><a href="#cb32-126"></a><span class="in">```bash</span></span>
<span id="cb32-127"><a href="#cb32-127"></a><span class="co"># Process 100 different input files</span></span>
<span id="cb32-128"><a href="#cb32-128"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"process_files[1-100]"</span> <span class="dt">\</span></span>
<span id="cb32-129"><a href="#cb32-129"></a>     <span class="at">-n</span> 1 <span class="dt">\</span></span>
<span id="cb32-130"><a href="#cb32-130"></a>     <span class="at">-M</span> 4000 <span class="dt">\</span></span>
<span id="cb32-131"><a href="#cb32-131"></a>     <span class="at">-W</span> 1:00 <span class="dt">\</span></span>
<span id="cb32-132"><a href="#cb32-132"></a>     <span class="at">-o</span> output_%I.out <span class="dt">\</span></span>
<span id="cb32-133"><a href="#cb32-133"></a>     <span class="at">-e</span> error_%I.err <span class="dt">\</span></span>
<span id="cb32-134"><a href="#cb32-134"></a>     <span class="st">"python process_single_file.py --file data/file_</span><span class="dt">\$</span><span class="st">LSB_JOBINDEX.csv"</span></span>
<span id="cb32-135"><a href="#cb32-135"></a><span class="in">```</span></span>
<span id="cb32-136"><a href="#cb32-136"></a></span>
<span id="cb32-137"><a href="#cb32-137"></a>**Array job magic**:</span>
<span id="cb32-138"><a href="#cb32-138"></a><span class="ss">- </span><span class="in">`[1-100]`</span>: Creates 100 separate jobs</span>
<span id="cb32-139"><a href="#cb32-139"></a><span class="ss">- </span><span class="in">`%I`</span>: Gets replaced with array index (1, 2, 3, ...)</span>
<span id="cb32-140"><a href="#cb32-140"></a><span class="ss">- </span><span class="in">`$LSB_JOBINDEX`</span>: Environment variable containing the array index</span>
<span id="cb32-141"><a href="#cb32-141"></a></span>
<span id="cb32-142"><a href="#cb32-142"></a>**Real-world analogy**: It's like having 100 identical tasks and hiring 100 workers to do them simultaneously, each with a different input file.</span>
<span id="cb32-143"><a href="#cb32-143"></a></span>
<span id="cb32-144"><a href="#cb32-144"></a><span class="fu">### Scenario 3: GPU Jobs</span></span>
<span id="cb32-145"><a href="#cb32-145"></a></span>
<span id="cb32-146"><a href="#cb32-146"></a><span class="in">```bash</span></span>
<span id="cb32-147"><a href="#cb32-147"></a><span class="co"># Machine learning training on GPU</span></span>
<span id="cb32-148"><a href="#cb32-148"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"ml_training"</span> <span class="dt">\</span></span>
<span id="cb32-149"><a href="#cb32-149"></a>     <span class="at">-q</span> gpu <span class="dt">\</span></span>
<span id="cb32-150"><a href="#cb32-150"></a>     <span class="at">-gpu</span> <span class="st">"num=1:mode=exclusive_process"</span> <span class="dt">\</span></span>
<span id="cb32-151"><a href="#cb32-151"></a>     <span class="at">-n</span> 4 <span class="dt">\</span></span>
<span id="cb32-152"><a href="#cb32-152"></a>     <span class="at">-M</span> 32000 <span class="dt">\</span></span>
<span id="cb32-153"><a href="#cb32-153"></a>     <span class="at">-W</span> 12:00 <span class="dt">\</span></span>
<span id="cb32-154"><a href="#cb32-154"></a>     <span class="st">"python train_model.py --epochs 100"</span></span>
<span id="cb32-155"><a href="#cb32-155"></a><span class="in">```</span></span>
<span id="cb32-156"><a href="#cb32-156"></a></span>
<span id="cb32-157"><a href="#cb32-157"></a><span class="fu">## Job Monitoring and Management</span></span>
<span id="cb32-158"><a href="#cb32-158"></a></span>
<span id="cb32-159"><a href="#cb32-159"></a><span class="fu">### Checking Job Status</span></span>
<span id="cb32-160"><a href="#cb32-160"></a></span>
<span id="cb32-161"><a href="#cb32-161"></a><span class="in">```bash</span></span>
<span id="cb32-162"><a href="#cb32-162"></a><span class="ex">bjobs</span>                    <span class="co"># Show all your jobs</span></span>
<span id="cb32-163"><a href="#cb32-163"></a><span class="ex">bjobs</span> <span class="at">-u</span> all            <span class="co"># Show all users' jobs</span></span>
<span id="cb32-164"><a href="#cb32-164"></a><span class="ex">bjobs</span> <span class="at">-r</span>                <span class="co"># Show only running jobs</span></span>
<span id="cb32-165"><a href="#cb32-165"></a><span class="ex">bjobs</span> <span class="at">-p</span>                <span class="co"># Show only pending jobs</span></span>
<span id="cb32-166"><a href="#cb32-166"></a><span class="ex">bjobs</span> 12345             <span class="co"># Show specific job details</span></span>
<span id="cb32-167"><a href="#cb32-167"></a><span class="in">```</span></span>
<span id="cb32-168"><a href="#cb32-168"></a></span>
<span id="cb32-169"><a href="#cb32-169"></a>**Job states you'll see**:</span>
<span id="cb32-170"><a href="#cb32-170"></a><span class="ss">- </span>**PEND**: Waiting in queue</span>
<span id="cb32-171"><a href="#cb32-171"></a><span class="ss">- </span>**RUN**: Currently running</span>
<span id="cb32-172"><a href="#cb32-172"></a><span class="ss">- </span>**DONE**: Completed successfully</span>
<span id="cb32-173"><a href="#cb32-173"></a><span class="ss">- </span>**EXIT**: Failed with error</span>
<span id="cb32-174"><a href="#cb32-174"></a></span>
<span id="cb32-175"><a href="#cb32-175"></a><span class="fu">### Detailed Job Information</span></span>
<span id="cb32-176"><a href="#cb32-176"></a></span>
<span id="cb32-177"><a href="#cb32-177"></a><span class="in">```bash</span></span>
<span id="cb32-178"><a href="#cb32-178"></a><span class="co"># Get detailed information about a job</span></span>
<span id="cb32-179"><a href="#cb32-179"></a><span class="ex">bjobs</span> <span class="at">-l</span> 12345          <span class="co"># Long format with all details</span></span>
<span id="cb32-180"><a href="#cb32-180"></a><span class="ex">bpeek</span> 12345             <span class="co"># Peek at current output while job runs</span></span>
<span id="cb32-181"><a href="#cb32-181"></a><span class="in">```</span></span>
<span id="cb32-182"><a href="#cb32-182"></a></span>
<span id="cb32-183"><a href="#cb32-183"></a><span class="fu">### Managing Running Jobs</span></span>
<span id="cb32-184"><a href="#cb32-184"></a></span>
<span id="cb32-185"><a href="#cb32-185"></a><span class="in">```bash</span></span>
<span id="cb32-186"><a href="#cb32-186"></a><span class="co"># Kill a job</span></span>
<span id="cb32-187"><a href="#cb32-187"></a><span class="ex">bkill</span> 12345             <span class="co"># Kill specific job</span></span>
<span id="cb32-188"><a href="#cb32-188"></a><span class="ex">bkill</span> <span class="at">-J</span> <span class="st">"job_name"</span>     <span class="co"># Kill job by name</span></span>
<span id="cb32-189"><a href="#cb32-189"></a><span class="ex">bkill</span> 0                 <span class="co"># Kill all your jobs (careful!)</span></span>
<span id="cb32-190"><a href="#cb32-190"></a></span>
<span id="cb32-191"><a href="#cb32-191"></a><span class="co"># Suspend and resume jobs</span></span>
<span id="cb32-192"><a href="#cb32-192"></a><span class="ex">bstop</span> 12345             <span class="co"># Suspend job</span></span>
<span id="cb32-193"><a href="#cb32-193"></a><span class="ex">bresume</span> 12345           <span class="co"># Resume suspended job</span></span>
<span id="cb32-194"><a href="#cb32-194"></a><span class="in">```</span></span>
<span id="cb32-195"><a href="#cb32-195"></a></span>
<span id="cb32-196"><a href="#cb32-196"></a>**Real-world analogy**: It's like having a remote control for your computational tasks – pause, stop, or check status anytime.</span>
<span id="cb32-197"><a href="#cb32-197"></a></span>
<span id="cb32-198"><a href="#cb32-198"></a><span class="fu">## Advanced bsub Techniques</span></span>
<span id="cb32-199"><a href="#cb32-199"></a></span>
<span id="cb32-200"><a href="#cb32-200"></a><span class="fu">### Job Dependencies</span></span>
<span id="cb32-201"><a href="#cb32-201"></a></span>
<span id="cb32-202"><a href="#cb32-202"></a><span class="in">```bash</span></span>
<span id="cb32-203"><a href="#cb32-203"></a><span class="co"># Job B waits for Job A to complete</span></span>
<span id="cb32-204"><a href="#cb32-204"></a><span class="va">JOB_A</span><span class="op">=</span><span class="va">$(</span><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"prepare_data"</span> <span class="st">"python prepare.py"</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-o</span> <span class="st">'[0-9]*'</span><span class="va">)</span></span>
<span id="cb32-205"><a href="#cb32-205"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"analyze_data"</span> <span class="at">-w</span> <span class="st">"done(</span><span class="va">$JOB_A</span><span class="st">)"</span> <span class="st">"python analyze.py"</span></span>
<span id="cb32-206"><a href="#cb32-206"></a><span class="in">```</span></span>
<span id="cb32-207"><a href="#cb32-207"></a></span>
<span id="cb32-208"><a href="#cb32-208"></a>**Real-world analogy**: It's like a cooking recipe where you can't start step 3 until step 2 is finished.</span>
<span id="cb32-209"><a href="#cb32-209"></a></span>
<span id="cb32-210"><a href="#cb32-210"></a><span class="fu">### Resource Specifications</span></span>
<span id="cb32-211"><a href="#cb32-211"></a></span>
<span id="cb32-212"><a href="#cb32-212"></a><span class="in">```bash</span></span>
<span id="cb32-213"><a href="#cb32-213"></a><span class="co"># Complex resource requirements</span></span>
<span id="cb32-214"><a href="#cb32-214"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"complex_job"</span> <span class="dt">\</span></span>
<span id="cb32-215"><a href="#cb32-215"></a>     <span class="at">-n</span> 16 <span class="dt">\</span></span>
<span id="cb32-216"><a href="#cb32-216"></a>     <span class="at">-R</span> <span class="st">"span[hosts=1]"</span> <span class="dt">\</span></span>
<span id="cb32-217"><a href="#cb32-217"></a>     <span class="at">-R</span> <span class="st">"rusage[mem=4000]"</span> <span class="dt">\</span></span>
<span id="cb32-218"><a href="#cb32-218"></a>     <span class="at">-R</span> <span class="st">"select[model==Intel_Platinum]"</span> <span class="dt">\</span></span>
<span id="cb32-219"><a href="#cb32-219"></a>     <span class="at">-W</span> 24:00 <span class="dt">\</span></span>
<span id="cb32-220"><a href="#cb32-220"></a>     <span class="st">"mpi_program"</span></span>
<span id="cb32-221"><a href="#cb32-221"></a><span class="in">```</span></span>
<span id="cb32-222"><a href="#cb32-222"></a></span>
<span id="cb32-223"><a href="#cb32-223"></a>**Resource options explained**:</span>
<span id="cb32-224"><a href="#cb32-224"></a><span class="ss">- </span><span class="in">`span[hosts=1]`</span>: All cores on same physical machine</span>
<span id="cb32-225"><a href="#cb32-225"></a><span class="ss">- </span><span class="in">`rusage[mem=4000]`</span>: 4GB memory per core</span>
<span id="cb32-226"><a href="#cb32-226"></a><span class="ss">- </span><span class="in">`select[model==Intel_Platinum]`</span>: Specific CPU type</span>
<span id="cb32-227"><a href="#cb32-227"></a></span>
<span id="cb32-228"><a href="#cb32-228"></a><span class="fu">### Interactive Jobs</span></span>
<span id="cb32-229"><a href="#cb32-229"></a></span>
<span id="cb32-230"><a href="#cb32-230"></a><span class="in">```bash</span></span>
<span id="cb32-231"><a href="#cb32-231"></a><span class="co"># Get interactive shell on compute node</span></span>
<span id="cb32-232"><a href="#cb32-232"></a><span class="ex">bsub</span> <span class="at">-Is</span> <span class="at">-n</span> 4 <span class="at">-M</span> 8000 <span class="at">-W</span> 2:00 bash</span>
<span id="cb32-233"><a href="#cb32-233"></a></span>
<span id="cb32-234"><a href="#cb32-234"></a><span class="co"># Interactive with X11 forwarding (for GUI applications)</span></span>
<span id="cb32-235"><a href="#cb32-235"></a><span class="ex">bsub</span> <span class="at">-Is</span> <span class="at">-XF</span> <span class="at">-n</span> 1 <span class="at">-M</span> 4000 <span class="at">-W</span> 1:00 bash</span>
<span id="cb32-236"><a href="#cb32-236"></a><span class="in">```</span></span>
<span id="cb32-237"><a href="#cb32-237"></a></span>
<span id="cb32-238"><a href="#cb32-238"></a>**Real-world analogy**: Instead of sending a letter (batch job), you're making a phone call (interactive session).</span>
<span id="cb32-239"><a href="#cb32-239"></a></span>
<span id="cb32-240"><a href="#cb32-240"></a><span class="fu">## Professional Job Submission Scripts</span></span>
<span id="cb32-241"><a href="#cb32-241"></a></span>
<span id="cb32-242"><a href="#cb32-242"></a><span class="fu">### The Standard Job Script Template</span></span>
<span id="cb32-243"><a href="#cb32-243"></a></span>
<span id="cb32-244"><a href="#cb32-244"></a><span class="in">```bash</span></span>
<span id="cb32-245"><a href="#cb32-245"></a><span class="co">#!/bin/bash</span></span>
<span id="cb32-246"><a href="#cb32-246"></a><span class="co">#BSUB -J "my_analysis"</span></span>
<span id="cb32-247"><a href="#cb32-247"></a><span class="co">#BSUB -n 8</span></span>
<span id="cb32-248"><a href="#cb32-248"></a><span class="co">#BSUB -M 16000</span></span>
<span id="cb32-249"><a href="#cb32-249"></a><span class="co">#BSUB -W 6:00</span></span>
<span id="cb32-250"><a href="#cb32-250"></a><span class="co">#BSUB -o output_%J.out</span></span>
<span id="cb32-251"><a href="#cb32-251"></a><span class="co">#BSUB -e error_%J.err</span></span>
<span id="cb32-252"><a href="#cb32-252"></a><span class="co">#BSUB -q normal</span></span>
<span id="cb32-253"><a href="#cb32-253"></a></span>
<span id="cb32-254"><a href="#cb32-254"></a><span class="co"># Load required modules</span></span>
<span id="cb32-255"><a href="#cb32-255"></a><span class="ex">module</span> load python/3.9</span>
<span id="cb32-256"><a href="#cb32-256"></a><span class="ex">module</span> load numpy/1.21</span>
<span id="cb32-257"><a href="#cb32-257"></a></span>
<span id="cb32-258"><a href="#cb32-258"></a><span class="co"># Set up environment</span></span>
<span id="cb32-259"><a href="#cb32-259"></a><span class="bu">export</span> <span class="va">OMP_NUM_THREADS</span><span class="op">=</span>8</span>
<span id="cb32-260"><a href="#cb32-260"></a><span class="bu">cd</span> /scratch/username/project</span>
<span id="cb32-261"><a href="#cb32-261"></a></span>
<span id="cb32-262"><a href="#cb32-262"></a><span class="co"># Run the analysis</span></span>
<span id="cb32-263"><a href="#cb32-263"></a><span class="bu">echo</span> <span class="st">"Starting analysis at </span><span class="va">$(</span><span class="fu">date</span><span class="va">)</span><span class="st">"</span></span>
<span id="cb32-264"><a href="#cb32-264"></a><span class="ex">python</span> analyze_data.py <span class="at">--input</span> data/experiment.csv <span class="at">--output</span> results/</span>
<span id="cb32-265"><a href="#cb32-265"></a><span class="bu">echo</span> <span class="st">"Analysis completed at </span><span class="va">$(</span><span class="fu">date</span><span class="va">)</span><span class="st">"</span></span>
<span id="cb32-266"><a href="#cb32-266"></a><span class="in">```</span></span>
<span id="cb32-267"><a href="#cb32-267"></a></span>
<span id="cb32-268"><a href="#cb32-268"></a>**Usage**:</span>
<span id="cb32-269"><a href="#cb32-269"></a><span class="in">```bash</span></span>
<span id="cb32-270"><a href="#cb32-270"></a><span class="fu">chmod</span> +x job_script.sh</span>
<span id="cb32-271"><a href="#cb32-271"></a><span class="ex">bsub</span> <span class="op">&lt;</span> job_script.sh</span>
<span id="cb32-272"><a href="#cb32-272"></a><span class="in">```</span></span>
<span id="cb32-273"><a href="#cb32-273"></a></span>
<span id="cb32-274"><a href="#cb32-274"></a><span class="fu">### Array Job Script for Multiple Files</span></span>
<span id="cb32-275"><a href="#cb32-275"></a></span>
<span id="cb32-276"><a href="#cb32-276"></a><span class="in">```bash</span></span>
<span id="cb32-277"><a href="#cb32-277"></a><span class="co">#!/bin/bash</span></span>
<span id="cb32-278"><a href="#cb32-278"></a><span class="co">#BSUB -J "process_files[1-50]"</span></span>
<span id="cb32-279"><a href="#cb32-279"></a><span class="co">#BSUB -n 1</span></span>
<span id="cb32-280"><a href="#cb32-280"></a><span class="co">#BSUB -M 4000</span></span>
<span id="cb32-281"><a href="#cb32-281"></a><span class="co">#BSUB -W 2:00</span></span>
<span id="cb32-282"><a href="#cb32-282"></a><span class="co">#BSUB -o output_%I.out</span></span>
<span id="cb32-283"><a href="#cb32-283"></a><span class="co">#BSUB -e error_%I.err</span></span>
<span id="cb32-284"><a href="#cb32-284"></a></span>
<span id="cb32-285"><a href="#cb32-285"></a><span class="co"># Load modules</span></span>
<span id="cb32-286"><a href="#cb32-286"></a><span class="ex">module</span> load python/3.9</span>
<span id="cb32-287"><a href="#cb32-287"></a></span>
<span id="cb32-288"><a href="#cb32-288"></a><span class="co"># Get the input file for this array job</span></span>
<span id="cb32-289"><a href="#cb32-289"></a><span class="va">INPUT_FILE</span><span class="op">=</span><span class="st">"data/file_</span><span class="va">${LSB_JOBINDEX}</span><span class="st">.csv"</span></span>
<span id="cb32-290"><a href="#cb32-290"></a><span class="va">OUTPUT_FILE</span><span class="op">=</span><span class="st">"results/result_</span><span class="va">${LSB_JOBINDEX}</span><span class="st">.csv"</span></span>
<span id="cb32-291"><a href="#cb32-291"></a></span>
<span id="cb32-292"><a href="#cb32-292"></a><span class="co"># Process the file</span></span>
<span id="cb32-293"><a href="#cb32-293"></a><span class="bu">echo</span> <span class="st">"Processing </span><span class="va">$INPUT_FILE</span><span class="st">"</span></span>
<span id="cb32-294"><a href="#cb32-294"></a><span class="ex">python</span> process_single.py <span class="at">--input</span> <span class="va">$INPUT_FILE</span> <span class="at">--output</span> <span class="va">$OUTPUT_FILE</span></span>
<span id="cb32-295"><a href="#cb32-295"></a><span class="bu">echo</span> <span class="st">"Completed processing </span><span class="va">$INPUT_FILE</span><span class="st">"</span></span>
<span id="cb32-296"><a href="#cb32-296"></a><span class="in">```</span></span>
<span id="cb32-297"><a href="#cb32-297"></a></span>
<span id="cb32-298"><a href="#cb32-298"></a><span class="fu">## Monitoring System Resources</span></span>
<span id="cb32-299"><a href="#cb32-299"></a></span>
<span id="cb32-300"><a href="#cb32-300"></a><span class="fu">### Cluster Status</span></span>
<span id="cb32-301"><a href="#cb32-301"></a></span>
<span id="cb32-302"><a href="#cb32-302"></a><span class="in">```bash</span></span>
<span id="cb32-303"><a href="#cb32-303"></a><span class="co"># Check queue status</span></span>
<span id="cb32-304"><a href="#cb32-304"></a><span class="ex">bqueues</span>                 <span class="co"># Show all queues and their status</span></span>
<span id="cb32-305"><a href="#cb32-305"></a><span class="ex">bhosts</span>                  <span class="co"># Show compute nodes and their status</span></span>
<span id="cb32-306"><a href="#cb32-306"></a><span class="ex">lsload</span>                  <span class="co"># Show current system load</span></span>
<span id="cb32-307"><a href="#cb32-307"></a><span class="in">```</span></span>
<span id="cb32-308"><a href="#cb32-308"></a></span>
<span id="cb32-309"><a href="#cb32-309"></a><span class="fu">### Your Resource Usage</span></span>
<span id="cb32-310"><a href="#cb32-310"></a></span>
<span id="cb32-311"><a href="#cb32-311"></a><span class="in">```bash</span></span>
<span id="cb32-312"><a href="#cb32-312"></a><span class="co"># Check your job history</span></span>
<span id="cb32-313"><a href="#cb32-313"></a><span class="ex">bhist</span>                   <span class="co"># Recent job history</span></span>
<span id="cb32-314"><a href="#cb32-314"></a><span class="ex">bhist</span> <span class="at">-l</span> 12345         <span class="co"># Detailed history for specific job</span></span>
<span id="cb32-315"><a href="#cb32-315"></a></span>
<span id="cb32-316"><a href="#cb32-316"></a><span class="co"># Check current usage</span></span>
<span id="cb32-317"><a href="#cb32-317"></a><span class="ex">busers</span>                  <span class="co"># Show user resource usage</span></span>
<span id="cb32-318"><a href="#cb32-318"></a><span class="in">```</span></span>
<span id="cb32-319"><a href="#cb32-319"></a></span>
<span id="cb32-320"><a href="#cb32-320"></a><span class="fu">## Common HPC Job Patterns</span></span>
<span id="cb32-321"><a href="#cb32-321"></a></span>
<span id="cb32-322"><a href="#cb32-322"></a><span class="fu">### Pattern 1: Parameter Sweep</span></span>
<span id="cb32-323"><a href="#cb32-323"></a></span>
<span id="cb32-324"><a href="#cb32-324"></a><span class="in">```bash</span></span>
<span id="cb32-325"><a href="#cb32-325"></a><span class="co"># Test different parameters</span></span>
<span id="cb32-326"><a href="#cb32-326"></a><span class="cf">for</span> param <span class="kw">in</span> 0.1 0.5 1.0 2.0 5.0<span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb32-327"><a href="#cb32-327"></a>    <span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"param_</span><span class="va">$param</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb32-328"><a href="#cb32-328"></a>         <span class="at">-n</span> 4 <span class="at">-M</span> 8000 <span class="at">-W</span> 3:00 <span class="dt">\</span></span>
<span id="cb32-329"><a href="#cb32-329"></a>         <span class="st">"python experiment.py --parameter </span><span class="va">$param</span><span class="st">"</span></span>
<span id="cb32-330"><a href="#cb32-330"></a><span class="cf">done</span></span>
<span id="cb32-331"><a href="#cb32-331"></a><span class="in">```</span></span>
<span id="cb32-332"><a href="#cb32-332"></a></span>
<span id="cb32-333"><a href="#cb32-333"></a><span class="fu">### Pattern 2: Pipeline Processing</span></span>
<span id="cb32-334"><a href="#cb32-334"></a></span>
<span id="cb32-335"><a href="#cb32-335"></a><span class="in">```bash</span></span>
<span id="cb32-336"><a href="#cb32-336"></a><span class="co"># Multi-stage pipeline</span></span>
<span id="cb32-337"><a href="#cb32-337"></a><span class="va">STAGE1</span><span class="op">=</span><span class="va">$(</span><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"stage1"</span> <span class="st">"python preprocess.py"</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-o</span> <span class="st">'[0-9]*'</span><span class="va">)</span></span>
<span id="cb32-338"><a href="#cb32-338"></a><span class="va">STAGE2</span><span class="op">=</span><span class="va">$(</span><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"stage2"</span> <span class="at">-w</span> <span class="st">"done(</span><span class="va">$STAGE1</span><span class="st">)"</span> <span class="st">"python analyze.py"</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-o</span> <span class="st">'[0-9]*'</span><span class="va">)</span></span>
<span id="cb32-339"><a href="#cb32-339"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"stage3"</span> <span class="at">-w</span> <span class="st">"done(</span><span class="va">$STAGE2</span><span class="st">)"</span> <span class="st">"python visualize.py"</span></span>
<span id="cb32-340"><a href="#cb32-340"></a><span class="in">```</span></span>
<span id="cb32-341"><a href="#cb32-341"></a></span>
<span id="cb32-342"><a href="#cb32-342"></a><span class="fu">### Pattern 3: Embarrassingly Parallel</span></span>
<span id="cb32-343"><a href="#cb32-343"></a></span>
<span id="cb32-344"><a href="#cb32-344"></a><span class="in">```bash</span></span>
<span id="cb32-345"><a href="#cb32-345"></a><span class="co"># Process 1000 independent tasks</span></span>
<span id="cb32-346"><a href="#cb32-346"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"parallel_tasks[1-1000]"</span> <span class="dt">\</span></span>
<span id="cb32-347"><a href="#cb32-347"></a>     <span class="at">-n</span> 1 <span class="at">-M</span> 2000 <span class="at">-W</span> 0:30 <span class="dt">\</span></span>
<span id="cb32-348"><a href="#cb32-348"></a>     <span class="st">"python independent_task.py --task_id </span><span class="dt">\$</span><span class="st">LSB_JOBINDEX"</span></span>
<span id="cb32-349"><a href="#cb32-349"></a><span class="in">```</span></span>
<span id="cb32-350"><a href="#cb32-350"></a></span>
<span id="cb32-351"><a href="#cb32-351"></a><span class="fu">## Troubleshooting Common Issues</span></span>
<span id="cb32-352"><a href="#cb32-352"></a></span>
<span id="cb32-353"><a href="#cb32-353"></a><span class="fu">### Problem 1: Job Stays in PEND State</span></span>
<span id="cb32-354"><a href="#cb32-354"></a>**Symptoms**: Job never starts running</span>
<span id="cb32-355"><a href="#cb32-355"></a>**Possible causes**:</span>
<span id="cb32-356"><a href="#cb32-356"></a><span class="ss">- </span>Requesting too many resources</span>
<span id="cb32-357"><a href="#cb32-357"></a><span class="ss">- </span>Wrong queue selection</span>
<span id="cb32-358"><a href="#cb32-358"></a><span class="ss">- </span>System maintenance</span>
<span id="cb32-359"><a href="#cb32-359"></a></span>
<span id="cb32-360"><a href="#cb32-360"></a>**Solutions**:</span>
<span id="cb32-361"><a href="#cb32-361"></a><span class="in">```bash</span></span>
<span id="cb32-362"><a href="#cb32-362"></a><span class="co"># Check why job is pending</span></span>
<span id="cb32-363"><a href="#cb32-363"></a><span class="ex">bjobs</span> <span class="at">-p</span> <span class="at">-l</span> 12345       <span class="co"># Look for pending reason</span></span>
<span id="cb32-364"><a href="#cb32-364"></a></span>
<span id="cb32-365"><a href="#cb32-365"></a><span class="co"># Try smaller resource request</span></span>
<span id="cb32-366"><a href="#cb32-366"></a><span class="ex">bsub</span> <span class="at">-n</span> 2 <span class="at">-M</span> 4000 <span class="st">"program"</span>    <span class="co"># Instead of -n 16 -M 64000</span></span>
<span id="cb32-367"><a href="#cb32-367"></a><span class="in">```</span></span>
<span id="cb32-368"><a href="#cb32-368"></a></span>
<span id="cb32-369"><a href="#cb32-369"></a><span class="fu">### Problem 2: Job Exits Immediately</span></span>
<span id="cb32-370"><a href="#cb32-370"></a>**Symptoms**: Job shows EXIT status quickly</span>
<span id="cb32-371"><a href="#cb32-371"></a>**Solutions**:</span>
<span id="cb32-372"><a href="#cb32-372"></a><span class="in">```bash</span></span>
<span id="cb32-373"><a href="#cb32-373"></a><span class="co"># Check error output</span></span>
<span id="cb32-374"><a href="#cb32-374"></a><span class="fu">cat</span> LSFERR.12345</span>
<span id="cb32-375"><a href="#cb32-375"></a></span>
<span id="cb32-376"><a href="#cb32-376"></a><span class="co"># Common issues:</span></span>
<span id="cb32-377"><a href="#cb32-377"></a><span class="co"># - Wrong file paths</span></span>
<span id="cb32-378"><a href="#cb32-378"></a><span class="co"># - Missing modules</span></span>
<span id="cb32-379"><a href="#cb32-379"></a><span class="co"># - Insufficient memory</span></span>
<span id="cb32-380"><a href="#cb32-380"></a><span class="in">```</span></span>
<span id="cb32-381"><a href="#cb32-381"></a></span>
<span id="cb32-382"><a href="#cb32-382"></a><span class="fu">### Problem 3: Out of Memory Errors</span></span>
<span id="cb32-383"><a href="#cb32-383"></a>**Symptoms**: Job killed due to memory usage</span>
<span id="cb32-384"><a href="#cb32-384"></a>**Solutions**:</span>
<span id="cb32-385"><a href="#cb32-385"></a><span class="in">```bash</span></span>
<span id="cb32-386"><a href="#cb32-386"></a><span class="co"># Request more memory</span></span>
<span id="cb32-387"><a href="#cb32-387"></a><span class="ex">bsub</span> <span class="at">-M</span> 32000 <span class="st">"memory_intensive_program"</span></span>
<span id="cb32-388"><a href="#cb32-388"></a></span>
<span id="cb32-389"><a href="#cb32-389"></a><span class="co"># Or optimize your program to use less memory</span></span>
<span id="cb32-390"><a href="#cb32-390"></a><span class="in">```</span></span>
<span id="cb32-391"><a href="#cb32-391"></a></span>
<span id="cb32-392"><a href="#cb32-392"></a><span class="fu">## Best Practices for HPC Job Management</span></span>
<span id="cb32-393"><a href="#cb32-393"></a></span>
<span id="cb32-394"><a href="#cb32-394"></a><span class="fu">### 1. Resource Estimation</span></span>
<span id="cb32-395"><a href="#cb32-395"></a><span class="ss">- </span>**Start small**: Test with small datasets first</span>
<span id="cb32-396"><a href="#cb32-396"></a><span class="ss">- </span>**Monitor usage**: Check actual resource consumption</span>
<span id="cb32-397"><a href="#cb32-397"></a><span class="ss">- </span>**Scale appropriately**: Don't over-request resources</span>
<span id="cb32-398"><a href="#cb32-398"></a></span>
<span id="cb32-399"><a href="#cb32-399"></a><span class="fu">### 2. Job Organization</span></span>
<span id="cb32-400"><a href="#cb32-400"></a><span class="in">```bash</span></span>
<span id="cb32-401"><a href="#cb32-401"></a><span class="co"># Use meaningful names</span></span>
<span id="cb32-402"><a href="#cb32-402"></a><span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"experiment_2023_12_15_batch_1"</span> <span class="st">"program"</span></span>
<span id="cb32-403"><a href="#cb32-403"></a></span>
<span id="cb32-404"><a href="#cb32-404"></a><span class="co"># Organize output files</span></span>
<span id="cb32-405"><a href="#cb32-405"></a><span class="ex">bsub</span> <span class="at">-o</span> logs/output_%J.out <span class="at">-e</span> logs/error_%J.err <span class="st">"program"</span></span>
<span id="cb32-406"><a href="#cb32-406"></a><span class="in">```</span></span>
<span id="cb32-407"><a href="#cb32-407"></a></span>
<span id="cb32-408"><a href="#cb32-408"></a><span class="fu">### 3. Error Handling</span></span>
<span id="cb32-409"><a href="#cb32-409"></a><span class="in">```bash</span></span>
<span id="cb32-410"><a href="#cb32-410"></a><span class="co"># Add error checking to your scripts</span></span>
<span id="cb32-411"><a href="#cb32-411"></a><span class="co">#!/bin/bash</span></span>
<span id="cb32-412"><a href="#cb32-412"></a><span class="bu">set</span> <span class="at">-e</span>                  <span class="co"># Exit on any error</span></span>
<span id="cb32-413"><a href="#cb32-413"></a><span class="bu">set</span> <span class="at">-u</span>                  <span class="co"># Exit on undefined variables</span></span>
<span id="cb32-414"><a href="#cb32-414"></a></span>
<span id="cb32-415"><a href="#cb32-415"></a><span class="co"># Your commands here</span></span>
<span id="cb32-416"><a href="#cb32-416"></a><span class="ex">python</span> analysis.py <span class="kw">||</span> <span class="kw">{</span> <span class="bu">echo</span> <span class="st">"Analysis failed"</span><span class="kw">;</span> <span class="bu">exit</span> 1<span class="kw">;</span> <span class="kw">}</span></span>
<span id="cb32-417"><a href="#cb32-417"></a><span class="in">```</span></span>
<span id="cb32-418"><a href="#cb32-418"></a></span>
<span id="cb32-419"><a href="#cb32-419"></a><span class="fu">## Quick Reference: bsub Command Cheat Sheet</span></span>
<span id="cb32-420"><a href="#cb32-420"></a></span>
<span id="cb32-421"><a href="#cb32-421"></a>| Task | Command | Purpose |</span>
<span id="cb32-422"><a href="#cb32-422"></a>|------|---------|---------|</span>
<span id="cb32-423"><a href="#cb32-423"></a>| Submit simple job | <span class="in">`bsub "command"`</span> | Basic job submission |</span>
<span id="cb32-424"><a href="#cb32-424"></a>| Request resources | <span class="in">`bsub -n 4 -M 8000 "cmd"`</span> | 4 cores, 8GB memory |</span>
<span id="cb32-425"><a href="#cb32-425"></a>| Set time limit | <span class="in">`bsub -W 2:00 "cmd"`</span> | 2 hour maximum |</span>
<span id="cb32-426"><a href="#cb32-426"></a>| Choose queue | <span class="in">`bsub -q gpu "cmd"`</span> | Submit to GPU queue |</span>
<span id="cb32-427"><a href="#cb32-427"></a>| Array jobs | <span class="in">`bsub -J "job[1-100]" "cmd"`</span> | 100 parallel jobs |</span>
<span id="cb32-428"><a href="#cb32-428"></a>| Job dependency | <span class="in">`bsub -w "done(123)" "cmd"`</span> | Wait for job 123 |</span>
<span id="cb32-429"><a href="#cb32-429"></a>| Interactive job | <span class="in">`bsub -Is bash`</span> | Interactive session |</span>
<span id="cb32-430"><a href="#cb32-430"></a>| Check jobs | <span class="in">`bjobs`</span> | Show job status |</span>
<span id="cb32-431"><a href="#cb32-431"></a>| Kill job | <span class="in">`bkill 12345`</span> | Cancel job |</span>
<span id="cb32-432"><a href="#cb32-432"></a>| Job details | <span class="in">`bjobs -l 12345`</span> | Detailed information |</span>
<span id="cb32-433"><a href="#cb32-433"></a></span>
<span id="cb32-434"><a href="#cb32-434"></a><span class="fu">## Practice Exercises</span></span>
<span id="cb32-435"><a href="#cb32-435"></a></span>
<span id="cb32-436"><a href="#cb32-436"></a>:::{.callout-important}</span>
<span id="cb32-437"><a href="#cb32-437"></a><span class="fu">## Your HPC Orchestra Training</span></span>
<span id="cb32-438"><a href="#cb32-438"></a></span>
<span id="cb32-439"><a href="#cb32-439"></a><span class="ss">1. </span>**Submit your first job**</span>
<span id="cb32-440"><a href="#cb32-440"></a>   <span class="in">```bash</span></span>
<span id="cb32-441"><a href="#cb32-441"></a>   <span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"hello_hpc"</span> <span class="st">"echo 'Hello from HPC cluster!'"</span></span>
<span id="cb32-442"><a href="#cb32-442"></a>   <span class="ex">bjobs</span>    <span class="co"># Check status</span></span>
<span id="cb32-443"><a href="#cb32-443"></a>   <span class="in">```</span></span>
<span id="cb32-444"><a href="#cb32-444"></a></span>
<span id="cb32-445"><a href="#cb32-445"></a><span class="ss">2. </span>**Create an array job**</span>
<span id="cb32-446"><a href="#cb32-446"></a>   <span class="in">```bash</span></span>
<span id="cb32-447"><a href="#cb32-447"></a>   <span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"test_array[1-5]"</span> <span class="st">"echo 'Task number </span><span class="dt">\$</span><span class="st">LSB_JOBINDEX'"</span></span>
<span id="cb32-448"><a href="#cb32-448"></a>   <span class="ex">bjobs</span>    <span class="co"># Watch multiple jobs</span></span>
<span id="cb32-449"><a href="#cb32-449"></a>   <span class="in">```</span></span>
<span id="cb32-450"><a href="#cb32-450"></a></span>
<span id="cb32-451"><a href="#cb32-451"></a><span class="ss">3. </span>**Submit a resource-intensive job**</span>
<span id="cb32-452"><a href="#cb32-452"></a>   <span class="in">```bash</span></span>
<span id="cb32-453"><a href="#cb32-453"></a>   <span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"resource_test"</span> <span class="at">-n</span> 4 <span class="at">-M</span> 8000 <span class="at">-W</span> 0:10 <span class="st">"sleep 300"</span></span>
<span id="cb32-454"><a href="#cb32-454"></a>   <span class="ex">bjobs</span> <span class="at">-l</span> <span class="pp">[</span><span class="ss">job_id</span><span class="pp">]</span>    <span class="co"># Check resource allocation</span></span>
<span id="cb32-455"><a href="#cb32-455"></a>   <span class="in">```</span></span>
<span id="cb32-456"><a href="#cb32-456"></a></span>
<span id="cb32-457"><a href="#cb32-457"></a><span class="ss">4. </span>**Practice job control**</span>
<span id="cb32-458"><a href="#cb32-458"></a>   <span class="in">```bash</span></span>
<span id="cb32-459"><a href="#cb32-459"></a>   <span class="ex">bsub</span> <span class="at">-J</span> <span class="st">"long_job"</span> <span class="st">"sleep 600"</span>    <span class="co"># Submit long job</span></span>
<span id="cb32-460"><a href="#cb32-460"></a>   <span class="ex">bjobs</span>                             <span class="co"># Note job ID</span></span>
<span id="cb32-461"><a href="#cb32-461"></a>   <span class="ex">bstop</span> <span class="pp">[</span><span class="ss">job_id</span><span class="pp">]</span>                   <span class="co"># Suspend it</span></span>
<span id="cb32-462"><a href="#cb32-462"></a>   <span class="ex">bresume</span> <span class="pp">[</span><span class="ss">job_id</span><span class="pp">]</span>                 <span class="co"># Resume it</span></span>
<span id="cb32-463"><a href="#cb32-463"></a>   <span class="ex">bkill</span> <span class="pp">[</span><span class="ss">job_id</span><span class="pp">]</span>                   <span class="co"># Kill it</span></span>
<span id="cb32-464"><a href="#cb32-464"></a>   <span class="in">```</span></span>
<span id="cb32-465"><a href="#cb32-465"></a>:::</span>
<span id="cb32-466"><a href="#cb32-466"></a></span>
<span id="cb32-467"><a href="#cb32-467"></a><span class="fu">## What's Next?</span></span>
<span id="cb32-468"><a href="#cb32-468"></a></span>
<span id="cb32-469"><a href="#cb32-469"></a>Now that you can orchestrate computational jobs like a professional, you're ready to learn <span class="co">[</span><span class="ot">Parallel Processing Patterns</span><span class="co">](10-parallel-processing.qmd)</span>. We'll explore GNU parallel and advanced techniques for maximizing your computational throughput.</span>
<span id="cb32-470"><a href="#cb32-470"></a></span>
<span id="cb32-471"><a href="#cb32-471"></a>Remember: HPC job scheduling is about being a good citizen in a shared computational environment while maximizing your research productivity. Master these patterns, and you'll be able to handle computational workloads that would be impossible on a single machine.</span>
<span id="cb32-472"><a href="#cb32-472"></a></span>
<span id="cb32-473"><a href="#cb32-473"></a>:::{.callout-tip}</span>
<span id="cb32-474"><a href="#cb32-474"></a><span class="fu">## HPC Mastery Challenge</span></span>
<span id="cb32-475"><a href="#cb32-475"></a>Before moving on, try these real-world scenarios:</span>
<span id="cb32-476"><a href="#cb32-476"></a><span class="ss">1. </span>Submit 10 jobs that each process a different parameter value</span>
<span id="cb32-477"><a href="#cb32-477"></a><span class="ss">2. </span>Create a pipeline where job B waits for job A to complete</span>
<span id="cb32-478"><a href="#cb32-478"></a><span class="ss">3. </span>Submit an interactive job and explore the compute node</span>
<span id="cb32-479"><a href="#cb32-479"></a><span class="ss">4. </span>Monitor resource usage of a running job</span>
<span id="cb32-480"><a href="#cb32-480"></a></span>
<span id="cb32-481"><a href="#cb32-481"></a>This practice will prepare you for managing complex computational workflows!</span>
<span id="cb32-482"><a href="#cb32-482"></a>:::</span>
<span id="cb32-483"><a href="#cb32-483"></a></span>
<span id="cb32-484"><a href="#cb32-484"></a>---</span>
<span id="cb32-485"><a href="#cb32-485"></a></span>
<span id="cb32-486"><a href="#cb32-486"></a>*You've learned to conduct your computational orchestra with bsub. Next, we'll explore advanced parallel processing techniques that will make your HPC workflows even more powerful!* </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



<script src="../../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>